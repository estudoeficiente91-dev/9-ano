<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudos: Gramática e Interpretação (9º Ano)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        /* Cores principais atualizadas */
        .bg-dark-bg { background-color: #121212; } /* Fundo principal */
        .bg-dark-surface { background-color: #1E1E1E; } /* Cartões e nav */
        .text-dark-text { color: #E0E0E0; } /* Texto padrão */
        .text-dark-light-text { color: #B0B0B0; } /* Texto secundário/p */

        /* Nova paleta de destaque: Tons de Bronze/Dourado Envelhecido */
        .accent-primary { background-color: #D97706; color: white; } /* Laranja escuro/Bronze (Orange 700) */
        .hover\:accent-primary-dark { background-color: #C26402; } /* Laranja mais escuro (Orange 800) */
        .accent-secondary { color: #FDBA74; } /* Laranja claro/Pêssego (Orange 300) */
        .text-highlight { color: #FED7AA; } /* Laranja mais claro (Orange 200) para destaques */
        .text-success { color: #34D399; } /* Esmeralda para sucesso */
        .bg-success-dark { background-color: #065F46; } /* Esmeralda mais escuro */
        .text-error { color: #EF4444; } /* Vermelho para erro */
        .bg-error-dark { background-color: #991B1B; } /* Vermelho mais escuro */
        
        .mode-button.active {
            background-color: #D97706; /* Cor principal de destaque */
            color: white;
        }
        .nav-link.active {
            background-color: #D97706; /* Cor principal de destaque */
            color: white;
        }

        .prose-headings {
            color: #FDBA74; /* Laranja claro (Orange 300) */
        }
        .prose-strong {
            color: #FDBA74; /* Laranja claro (Orange 300) */
        }
        .prose-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1em;
            margin-bottom: 1em;
        }
        .prose-th, .prose-td {
            border: 1px solid #424242; /* Cinza mais escuro para bordas da tabela */
            padding: 0.5em 1em;
        }
        .prose-th {
            background-color: #2F2F2F; /* Fundo mais escuro para cabeçalho da tabela */
            font-weight: 600;
        }
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-dark-bg text-dark-text">

    <div class="w-full max-w-7xl mx-auto">
        <header class="text-center py-8 px-4">
            <h1 class="text-4xl sm:text-5xl font-bold text-white mb-4">Gramática e Interpretação</h1>
            <p class="text-lg text-dark-light-text">Um guia sobre Pronomes Relativos, Oração Adjetiva, Crase e Interpretação (9º Ano).</p>
        </header>
        
        <nav class="flex justify-center items-center bg-dark-surface rounded-lg p-2 mb-8 gap-2 flex-wrap max-w-md mx-auto">
            <button id="btn-learn" class="mode-button accent-primary flex-grow sm:flex-grow-0 text-center py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">Aprender</button>
            <button id="btn-practice" class="mode-button flex-grow sm:flex-grow-0 text-center py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">Praticar</button>
        </nav>

        <div id="learn-container">
            <div class="flex flex-col lg:flex-row gap-8 p-4">
                <!-- Navegação Lateral --><aside class="lg:w-1/4">
                    <nav class="sticky top-4 bg-dark-surface rounded-lg p-4">
                        <h3 class="text-xl font-bold text-white mb-4">Tópicos</h3>
                        <ul class="space-y-2">
                            <li><a href="#pronome_relativo" class="nav-link block py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark active">Pronome Relativo</a></li>
                            <li><a href="#oracao_adjetiva" class="nav-link block py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">Oração Subordinada Adjetiva</a></li>
                            <li><a href="#crase" class="nav-link block py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">Crase</a></li>
                            <li><a href="#interpretacao" class="nav-link block py-2 px-4 rounded-md font-semibold transition-all duration-300 hover:accent-primary-dark">Interpretação de Texto</a></li>
                        </ul>
                    </nav>
                </aside>

                <!-- Conteúdo Principal --><main class="lg:w-3/4 space-y-12">
                    <section id="pronome_relativo" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg">
                        <article class="prose prose-invert max-w-none text-dark-light-text">
                            <h2 class="text-3xl font-bold border-b border-gray-700 pb-2 mb-4 prose-headings">Pronome Relativo</h2>
                            <p>O <strong class="prose-strong">Pronome Relativo</strong> é uma palavra que <strong class="text-highlight">substitui um termo anterior</strong> (chamado de antecedente) e, ao mesmo tempo, <strong class="text-highlight">inicia uma nova oração</strong> (a oração subordinada adjetiva).</p>
                            <p>Ele é essencial para evitar a repetição de palavras e conectar ideias.</p>
                            
                            <h3 class="text-2xl font-semibold mt-6">Principais Pronomes Relativos e Seus Usos</h3>
                            
                            <h4 class="text-xl font-semibold mt-4">QUE (o universal)</h4>
                            <ul>
                                <li>É o pronome mais usado.</li>
                                <li>Pode ser usado para se referir a <strong class="text-highlight">pessoas ou coisas</strong>.</li>
                                <li>Exemplo: "O livro <strong class="prose-strong">que</strong> eu li é ótimo." (O "que" substitui "o livro")</li>
                                <li>Exemplo: "O professor <strong class="prose-strong">que</strong> me ensinou é paciente." (O "que" substitui "o professor")</li>
                            </ul>

                            <h4 class="text-xl font-semibold mt-4">QUEM</h4>
                            <ul>
                                <li>Refere-se exclusivamente a <strong class="text-highlight">pessoas</strong>.</li>
                                <li>Quase sempre vem precedido por uma preposição (a, com, de, por, etc.).</li>
                                <li>Exemplo: "A pessoa <strong class="prose-strong">com quem</strong> conversei era simpática."</li>
                                <li>Exemplo: "Este é o autor <strong class="prose-strong">a quem</strong> me referi."</li>
                            </ul>

                            <h4 class="text-xl font-semibold mt-4">ONDE</h4>
                            <ul>
                                <li>Refere-se exclusivamente a <strong class="text-highlight">lugares</strong> (ideia de lugar fixo).</li>
                                <li>Equivale a "em que" ou "no qual".</li>
                                <li>Exemplo: "A casa <strong class="prose-strong">onde</strong> moro é antiga." (A casa na qual moro)</li>
                                <li><strong class="text-highlight">Cuidado:</strong> Não use "onde" para tempo ou assunto. (Errado: "Uma reunião onde discutimos o projeto." Certo: "Uma reunião <strong class="prose-strong">em que</strong> discutimos o projeto.")</li>
                            </ul>

                            <h4 class="text-xl font-semibold mt-4">CUJO / CUJA / CUJOS / CUJAS</h4>
                            <ul>
                                <li>É o único que indica <strong class="text-highlight">posse</strong>.</li>
                                <li>Estabelece uma relação de posse entre o termo que vem <strong class="text-highlight">depois</strong> dele (possuído) e o termo que vem <strong class="text-highlight">antes</strong> (possuidor).</li>
                                <li><strong class="text-highlight">Regra de Ouro:</strong> Nunca use artigo (o, a, os, as) depois de "cujo".</li>
                                <li>Exemplo: "O aluno <strong class="prose-strong">cujo</strong> trabalho foi premiado..." (O trabalho <strong class="text-highlight">do</strong> aluno)</li>
                                <li>Exemplo: "A árvore <strong class="prose-strong">cujos</strong> frutos estão maduros..." (Os frutos <strong class="text-highlight">da</strong> árvore)</li>
                            </ul>

                            <h4 class="text-xl font-semibold mt-4">O QUAL / A QUAL / OS QUAIS / AS QUAIS</h4>
                            <ul>
                                <li>São usados para evitar ambiguidade ou quando o pronome "que" não pode ser usado (especialmente após preposições longas).</li>
                                <li>Exemplo: "A casa da minha tia, <strong class="prose-strong">a qual</strong> fica na colina, é linda." (Uso mais formal que "que")</li>
                            </ul>
                        </article>
                    </section>
                    
                    <section id="oracao_adjetiva" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg">
                        <article class="prose prose-invert max-w-none text-dark-light-text">
                            <h2 class="text-3xl font-bold border-b border-gray-700 pb-2 mb-4 prose-headings">Oração Subordinada Adjetiva</h2>
                            <p>É uma oração que funciona como um <strong class="prose-strong">adjetivo</strong>, modificando um substantivo (o antecedente) da oração principal. Ela é <strong class="text-highlight">sempre iniciada por um pronome relativo</strong>.</p>
                            
                            <h3 class="text-2xl font-semibold mt-6">Tipos de Orações Adjetivas</h3>
                            <p>Existem dois tipos, e a única diferença entre eles é o uso da <strong class="text-highlight">vírgula</strong>. A vírgula muda completamente o sentido da frase.</p>

                            <h4 class="text-xl font-semibold mt-4">1. Adjetiva RESTRITIVA (sem vírgula)</h4>
                            <ul>
                                <li><strong class="text-highlight">Não usa vírgula.</strong></li>
                                <li><strong class="prose-strong">Função:</strong> Restringir, limitar, especificar. Ela diz que, de um grupo, estamos falando apenas de uma parte específica.</li>
                                <li>Exemplo: "Os alunos <strong class="prose-strong">que estudaram</strong> passaram na prova."
                                    <ul>
                                        <li><strong>Sentido:</strong> Apenas uma parte dos alunos (o subgrupo "que estudou") passou. Os outros alunos (que não estudaram) não passaram. A oração restringe o universo de "alunos".</li>
                                    </ul>
                                </li>
                            </ul>

                            <h4 class="text-xl font-semibold mt-4">2. Adjetiva EXPLICATIVA (com vírgula)</h4>
                            <ul>
                                <li><strong class="text-highlight">Sempre vem entre vírgulas</strong> (ou separada por uma vírgula, se estiver no final).</li>
                                <li><strong class="prose-strong">Função:</strong> Explicar, dar uma informação extra, uma característica geral. A informação se aplica a todo o grupo.</li>
                                <li>Exemplo: "Os alunos, <strong class="prose-strong">que estudaram</strong>, passaram na prova."
                                    <ul>
                                        <li><strong>Sentido:</strong> <strong class="text-highlight">Todos</strong> os alunos passaram na prova. A oração "que estudaram" é apenas uma explicação, uma informação extra sobre eles (todos eles estudaram).</li>
                                    </ul>
                                </li>
                            </ul>

                            <h4 class="text-xl font-semibold mt-4">Comparação Clássica:</h4>
                            <p><strong>Restritiva:</strong> "O homem <strong class="prose-strong">que é mortal</strong> deve temer." (Sentido: Restringe. Só o homem que é mortal deve temer, sugerindo que existe algum homem que não é mortal.)</p>
                            <p><strong>Explicativa:</strong> "O homem, <strong class="prose-strong">que é mortal</strong>, deve temer." (Sentido: Explica. O homem (todo homem) deve temer, e a oração no meio apenas explica uma característica universal dele: ser mortal.)</p>
                        </article>
                    </section>

                    <section id="crase" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg">
                        <article class="prose prose-invert max-w-none text-dark-light-text">
                            <h2 class="text-3xl font-bold border-b border-gray-700 pb-2 mb-4 prose-headings">Crase</h2>
                            <p>Crase é a <strong class="prose-strong">fusão (contração) de duas vogais "a" idênticas</strong>. Na prática, é a fusão da <strong class="text-highlight">preposição "a"</strong> com o <strong class="text-highlight">artigo "a"</strong> (ou com os pronomes demonstrativos "aquele", "aquela", "aquilo").</p>
                            <p>O acento grave ( ` ) indica que essa fusão ocorreu.</p>
                            <p>Crase = Preposição "a" + Artigo "a(s)"</p>

                            <h3 class="text-2xl font-semibold mt-6">Quando Usar Crase (Casos Principais)</h3>
                            
                            <h4 class="text-xl font-semibold mt-4">1. Dica de Ouro (Substituição)</h4>
                            <p>Substitua a palavra feminina por uma masculina. Se o "a" virar <strong class="text-highlight">"ao"</strong>, então há crase.</p>
                            <ul>
                                <li>Exemplo: "Vou <strong class="prose-strong">à</strong> feira."
                                    <ul>
                                        <li>Troque "feira" (feminina) por "mercado" (masculino).</li>
                                        <li>"Vou <strong class="text-highlight">ao</strong> mercado." (Virou "ao", então "à feira" tem crase).</li>
                                    </ul>
                                </li>
                                <li>Exemplo: "Vi <strong class="prose-strong">a</strong> feira."
                                    <ul>
                                        <li>Troque por "mercado".</li>
                                        <li>"Vi <strong class="text-highlight">o</strong> mercado." (Virou "o", não "ao". Portanto, "a feira" não tem crase).</li>
                                    </ul>
                                </li>
                            </ul>

                            <h4 class="text-xl font-semibold mt-4">2. Em Locuções Adverbiais Femininas</h4>
                            <p>Sempre há crase em expressões femininas de tempo, modo ou lugar.</p>
                            <ul>
                                <li>Exemplos: <strong class="prose-strong">à noite</strong>, <strong class="prose-strong">à tarde</strong>, <strong class="prose-strong">às vezes</strong>, <strong class="prose-strong">à direita</strong>, <strong class="prose-strong">à esquerda</strong>, <strong class="prose-strong">à toa</strong>, <strong class="prose-strong">às pressas</strong>, <strong class="prose-strong">à medida que</strong>.</li>
                            </ul>

                            <h4 class="text-xl font-semibold mt-4">3. Antes de "aquele", "aquela", "aquilo"</h4>
                            <p>Haverá crase se o verbo ou nome anterior pedir a preposição "a".</p>
                            <ul>
                                <li>Exemplo: "Refiro-me <strong class="prose-strong">àquele</strong> aluno." (Quem se refere, se refere <strong class="text-highlight">a</strong> algo/alguém).</li>
                            </ul>

                            <h3 class="text-2xl font-semibold mt-6">Quando NUNCA Usar Crase (Casos Proibidos)</h3>
                            <ul>
                                <li>Antes de <strong class="text-highlight">palavra masculina</strong>: "Andar <strong class="prose-strong">a</strong> cavalo", "Compra <strong class="prose-strong">a</strong> prazo".</li>
                                <li>Antes de <strong class="text-highlight">verbo</strong>: "Estou disposto <strong class="prose-strong">a</strong> estudar", "Começou <strong class="prose-strong">a</strong> chover".</li>
                                <li>Antes de <strong class="text-highlight">pronomes pessoais</strong> (ela, mim, você): "Devo <strong class="prose-strong">a</strong> ela um favor".</li>
                                <li>Entre <strong class="text-highlight">palavras repetidas</strong>: "Face <strong class="prose-strong">a</strong> face", "Gota <strong class="prose-strong">a</strong> gota".</li>
                                <li>Quando o "a" estiver no singular e a palavra seguinte no <strong class="text-highlight">plural</strong>: "Refiro-me <strong class="prose-strong">a</strong> pessoas..."</li>
                            </ul>
                        </article>
                    </section>
                    
                    <section id="interpretacao" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg">
                        <article class="prose prose-invert max-w-none text-dark-light-text">
                            <h2 class="text-3xl font-bold border-b border-gray-700 pb-2 mb-4 prose-headings">Dicas de Interpretação de Texto</h2>
                            <p>Interpretar um texto é ir além do que está escrito; é entender a <strong class="prose-strong">intenção</strong> do autor, as <strong class="prose-strong">ideias implícitas</strong> e o <strong class="prose-strong">contexto</strong>.</p>
                            
                            <h3 class="text-2xl font-semibold mt-6">1. A Diferença entre Compreensão e Interpretação</h3>
                            <ul>
                                <li><strong>Compreensão (O que está escrito?):</strong> É identificar informações <strong class="text-highlight">explícitas</strong> no texto. "Segundo o autor...", "O texto afirma que...".</li>
                                <li><strong>Interpretação (O que isso significa?):</strong> É deduzir, inferir, concluir. É o <strong class="text-highlight">que podemos entender</strong> a partir do que foi dito. "Conclui-se que...", "O texto permite deduzir que...".</li>
                            </ul>

                            <h3 class="text-2xl font-semibold mt-6">2. Passos para uma Boa Interpretação</h3>
                            <ol>
                                <li><strong>Primeira Leitura (Visão Geral):</strong> Leia o texto uma vez sem parar, apenas para entender qual é o <strong class="text-highlight">assunto principal</strong>.</li>
                                <li><strong>Segunda Leitura (Marcação):</strong> Leia novamente, agora com atenção. Sublinhe as <strong class="prose-strong">ideias centrais</strong> de cada parágrafo, as palavras-chave e o que você não entendeu.</li>
                                <li><strong>Identifique a Tese:</strong> Qual é a <strong class="text-highlight">opinião principal</strong> que o autor está defendendo? Todo texto argumentativo tem uma.</li>
                                <li><strong>Cuidado com as "Pegadinhas":</strong> Preste atenção em palavras que mudam todo o sentido: <strong class="text-highlight">não, nunca, sempre, exceto, apenas, somente</strong>.</li>
                                <li><strong>Interprete o Enunciado:</strong> Muitas vezes o erro não está no texto, mas em <strong class="text-highlight">não entender o que a pergunta</strong> está pedindo.</li>
                            </ol>

                            <h3 class="text-2xl font-semibold mt-6">3. Figuras de Linguagem Comuns</h3>
                            <p>Autores usam recursos para tornar o texto mais expressivo. Conhecer alguns ajuda na interpretação:</p>
                            <ul>
                                <li><strong>Metáfora:</strong> Uma comparação implícita. "A vida é uma nuvem <strong class="prose-strong">que</strong> voa." (A vida é = nuvem).</li>
                                <li><strong>Ironia:</strong> Dizer o contrário do que se pensa. "Que pessoa educada! (dito sobre alguém que foi grosseiro)".</li>
                                <li><strong>Hipérbole:</strong> O exagero intencional. "Estou <strong class="prose-strong">morrendo</strong> de fome."</li>
                            </ul>
                        </article>
                    </section>
                </main>
            </div>
        </div>
        
        <!-- Seção Praticar --><section id="practice-section" class="hidden p-4">
            <div id="quiz-container" class="bg-dark-surface p-6 sm:p-8 rounded-lg shadow-lg max-w-3xl mx-auto">
                <div id="question-header" class="mb-4 text-center">
                    <p class="accent-secondary font-semibold" id="question-topic"></p>
                </div>
                <p id="question-text" class="text-xl text-center mb-6 min-h-[60px]"></p>
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                <div id="feedback-container" class="mt-6 text-center"></div>

                <!-- Navegação --><div class="flex justify-between items-center mt-8">
                    <button id="prev-btn" class="accent-primary py-2 px-5 rounded-md font-semibold transition-colors hover:accent-primary-dark disabled:bg-gray-600 disabled:cursor-not-allowed">Anterior</button>
                    <span id="question-counter" class="font-semibold text-dark-text"></span>
                    <button id="next-btn" class="accent-primary py-2 px-5 rounded-md font-semibold transition-colors hover:accent-primary-dark">Próxima</button>
                </div>
            </div>

            <!-- Navegação de Questões --><div id="question-nav-container" class="hidden bg-dark-surface p-4 rounded-lg shadow-lg max-w-3xl mx-auto mt-4">
                <div id="question-buttons-grid" class="flex flex-wrap justify-center gap-2">
                    <!-- Buttons will be programmatically inserted here --></div>
            </div>

             <!-- Tela de Pontuação --><div id="score-screen" class="hidden text-center bg-dark-surface p-8 rounded-lg shadow-lg max-w-3xl mx-auto mt-8">
                <h3 class="text-4xl font-bold text-white mb-4">Pontuação Final</h3>
                <p id="final-score" class="text-6xl font-bold accent-secondary mb-2"></p>
                <p id="score-message" class="text-lg text-dark-light-text mb-8"></p>
                <button id="restart-btn" class="bg-green-600 text-white py-3 px-8 rounded-lg font-semibold text-lg hover:bg-green-500 transition-colors">Recomeçar</button>
            </div>
        </section>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        // --- BANCO DE DADOS DAS QUESTÕES ---
        const questions = [
            // Pronome Relativo (8 questões)
            { topic: "Pronome Relativo", question: "Em 'O livro QUE li é ótimo', o pronome 'QUE' substitui qual palavra?", options: ["livro", "ótimo", "eu", "li"], answer: 0, explanation: "O pronome relativo 'que' retoma o termo antecedente, que neste caso é 'livro'. (O livro é ótimo. Eu li o livro.)" },
            { topic: "Pronome Relativo", question: "Qual pronome relativo deve ser usado para indicar posse?", options: ["Que", "Onde", "Quem", "Cujo"], answer: 3, explanation: "O pronome 'cujo' (e suas variações: cuja, cujos, cujas) é o único que estabelece uma relação de posse." },
            { topic: "Pronome Relativo", question: "Complete a lacuna: 'A cidade ______ moro é tranquila.'", options: ["que", "onde", "cuja", "a qual"], answer: 1, explanation: "Para indicar lugar físico, usamos 'onde' (que equivale a 'em que' ou 'na qual')." },
            { topic: "Pronome Relativo", question: "Complete a lacuna: 'As pessoas ______ conversei eram simpáticas.'", options: ["que", "cujas", "onde", "com quem"], answer: 3, explanation: "O verbo 'conversar' pede a preposição 'com' (conversar com alguém). Como 'pessoas' é o antecedente, usamos 'com quem'." },
            { topic: "Pronome Relativo", question: "Qual frase está INCORRETA quanto ao uso de 'cujo'?", options: ["O aluno cujo o trabalho foi bom.", "O aluno cujo trabalho foi bom.", "A árvore cujos frutos caíram.", "A autora cuja obra admiro."], answer: 0, explanation: "A regra de ouro de 'cujo' é: NUNCA use artigo (o, a, os, as) depois dele. O correto é 'cujo trabalho'." },
            { topic: "Pronome Relativo", question: "Em 'A reunião ______ tratamos do assunto foi longa', qual opção NÃO se encaixa?", options: ["em que", "na qual", "onde", "que"], answer: 2, explanation: "'Onde' só pode ser usado para lugar físico. 'Reunião' não é um lugar. O correto seria 'em que', 'na qual' ou 'em que'." },
            { topic: "Pronome Relativo", question: "Complete: 'Este é o projeto ______ participei.'", options: ["onde", "de que", "cujo", "quem"], answer: 1, explanation: "Quem participa, participa 'de' algo. O pronome 'que' retoma 'projeto'. Portanto, 'de que' (ou 'do qual')." },
            { topic: "Pronome Relativo", question: "O pronome 'quem' refere-se exclusivamente a:", options: ["Lugares", "Objetos", "Pessoas", "Ideias"], answer: 2, explanation: "'Quem' é usado para retomar pessoas. 'Que' é universal. 'Onde' é para lugares." },

            // Oração Subordinada Adjetiva (7 questões)
            { topic: "Oração Adjetiva", question: "Qual é a função de uma Oração Subordinada Adjetiva?", options: ["Funcionar como sujeito", "Funcionar como objeto direto", "Funcionar como adjetivo (caracterizar um nome)", "Funcionar como advérbio"], answer: 2, explanation: "O nome já diz: 'adjetiva'. Ela tem o mesmo valor de um adjetivo, caracterizando um substantivo da oração principal." },
            { topic: "Oração Adjetiva", question: "As Orações Adjetivas são sempre iniciadas por:", options: ["Conjunção integrante (que, se)", "Verbo no infinitivo", "Pronome relativo (que, cujo, onde...)", "Preposição"], answer: 2, explanation: "A marca de uma oração adjetiva é ser introduzida por um pronome relativo, que retoma o termo anterior." },
            { topic: "Oração Adjetiva", question: "Em 'Os políticos QUE são honestos merecem respeito', a oração destacada é:", options: ["Adjetiva Explicativa", "Adjetiva Restritiva", "Substantiva", "Adverbial"], answer: 1, explanation: "A ausência de vírgulas indica que é uma Restritiva. O sentido é: apenas o subgrupo de políticos (os honestos) merece respeito." },
            { topic: "Oração Adjetiva", question: "Em 'O Sol, QUE é uma estrela, ilumina a Terra', a oração destacada é:", options: ["Adjetiva Explicativa", "Adjetiva Restritiva", "Substantiva", "Adverbial"], answer: 0, explanation: "O uso das vírgulas indica que é uma Explicativa. A oração dá uma informação extra sobre o Sol (que é uma característica de todo sol)." },
            { topic: "Oração Adjetiva", question: "Qual é a diferença de sentido entre 'O homem QUE é mortal...' e 'O homem, QUE é mortal,...'?", options: ["Nenhuma, as vírgulas são opcionais.", "A primeira restringe (só o mortal), a segunda explica (todo homem é mortal).", "A primeira explica (todo homem é mortal), a segunda restringe (só o mortal).", "A primeira está errada, a segunda está certa."], answer: 1, explanation: "Sem vírgula (Restritiva), ela restringe o grupo. Com vírgula (Explicativa), ela dá uma característica geral de todo o grupo." },
            { topic: "Oração Adjetiva", question: "Qual tipo de oração adjetiva usa vírgulas?", options: ["Apenas a Restritiva", "Apenas a Explicativa", "Ambas", "Nenhuma"], answer: 1, explanation: "A marca da oração adjetiva Explicativa é o uso obrigatório de vírgulas para isolar a informação." },
            { topic: "Oração Adjetiva", question: "Na frase 'Não gosto de pessoas QUE falam alto', a oração adjetiva:", options: ["Explica que todas as pessoas falam alto.", "Restringe: só não gosto do grupo que fala alto.", "Indica posse.", "Está errada, deveria usar 'cujo'."], answer: 1, explanation: "Como não há vírgulas, é Restritiva. Ela limita o universo de 'pessoas': não são todas as pessoas, apenas o grupo específico que fala alto." },

            // Crase (8 questões)
            { topic: "Crase", question: "Em qual frase o uso da crase está CORRETO?", options: ["Vou a escola.", "Refiro-me à você.", "Cheguei à noite.", "Ando à cavalo."], answer: 2, explanation: "'À noite' é uma locução adverbial feminina de tempo, que sempre exige crase." },
            { topic: "Crase", question: "Qual caso proíbe o uso da crase?", options: ["Antes de locução adverbial feminina", "Antes de palavra masculina", "Quando o 'a' vira 'ao'", "Antes de horas"], answer: 1, explanation: "Nunca se usa crase antes de palavra masculina. Ex: 'compra a prazo', 'passeio a cavalo'." },
            { topic: "Crase", question: "Complete: 'Devo obediência ______ diretora.' (Use a dica do 'ao')", options: ["a", "á", "à", "há"], answer: 2, explanation: "Troque 'diretora' (feminino) por 'diretor' (masculino): 'Devo obediência AO diretor'. Se vira 'ao', há crase." },
            { topic: "Crase", question: "Complete: 'Vi ______ diretora.' (Use a dica do 'ao')", options: ["a", "á", "à", "há"], answer: 0, explanation: "Troque por 'diretor': 'Vi O diretor'. Se vira 'o' (e não 'ao'), não há crase." },
            { topic: "Crase", question: "Em 'Fomos ______ praia', há crase?", options: ["Sim, pois trocando por 'parque' fica 'ao parque'.", "Não, pois 'praia' é masculino.", "Sim, pois 'praia' é feminino.", "Não, pois o 'a' vira 'o'."], answer: 0, explanation: "A dica da troca funciona. Trocando 'praia' (feminino) por 'parque' (masculino), a frase fica: 'Fomos AO parque'. Se vira 'ao', há crase." },
            { topic: "Crase", question: "Por que 'Começou a chover' NÃO tem crase?", options: ["Porque 'chover' é palavra masculina.", "Porque 'chover' é um verbo.", "Porque deveria ser 'Começou à chover'.", "Porque 'chover' está no plural."], answer: 1, explanation: "É proibido usar crase antes de verbos no infinitivo (terminados em ar, er, ir)." },
            { topic: "Crase", question: "Em 'Refiro-me ______ pessoas que sumiram', qual a forma correta?", options: ["à", "a", "às", "as"], answer: 1, explanation: "O 'a' está no singular, mas a palavra seguinte ('pessoas') está no plural. Neste caso, é proibido usar crase." },
            { topic: "Crase", question: "Em 'Entreguei o prêmio ______ ela', por que NÃO há crase?", options: ["Porque 'ela' é palavra masculina.", "Porque 'ela' é um pronome pessoal.", "Porque 'ela' é um verbo.", "Porque deveria ter crase sim."], answer: 1, explanation: "É proibido usar crase antes da maioria dos pronomes pessoais (eu, tu, ela, mim, ti, etc.)." },

            // Interpretação de Texto (7 questões)
            { topic: "Interpretação", question: "Qual é a diferença entre COMPREENSÃO e INTERPRETAÇÃO de texto?", options: ["Compreensão é o que está implícito; Interpretação é o que está explícito.", "São a mesma coisa.", "Compreensão é o que está explícito; Interpretação é o que se conclui (implícito).", "Compreensão é opinar; Interpretação é resumir."], answer: 2, explanation: "Compreensão é achar a informação que está escrita no texto (explícita). Interpretação é deduzir ou concluir algo a partir do texto (implícito)." },
            { topic: "Interpretação", question: "Perguntas com 'Segundo o texto...' ou 'O autor afirma que...' são de:", options: ["Interpretação", "Compreensão", "Ambiguidade", "Ironia"], answer: 1, explanation: "Esses comandos pedem que você localize a informação que está dita de forma explícita, ou seja, são de compreensão." },
            { topic: "Interpretação", question: "Perguntas com 'Conclui-se que...' ou 'Infere-se do texto que...' são de:", options: ["Interpretação", "Compreensão", "Citação direta", "Coerência"], answer: 0, explanation: "Esses comandos pedem que você deduza uma ideia que não está escrita, mas é sugerida pelo texto, ou seja, são de interpretação." },
            { topic: "Interpretação", question: "Dizer 'Estou morrendo de sede' é um exemplo de qual figura de linguagem?", options: ["Metáfora", "Ironia", "Hipérbole", "Comparação"], answer: 2, explanation: "Hipérbole é a figura do exagero intencional para dar ênfase ('morrendo' de sede)." },
            { topic: "Interpretação", question: "Na frase 'Ele é um leão', usada para descrever um homem corajoso, temos uma:", options: ["Hipérbole", "Metáfora", "Ironia", "Personificação"], answer: 1, explanation: "Metáfora é uma comparação implícita ('Ele é = leão'), sem usar o conectivo 'como'." },
            { topic: "Interpretação", question: "Qual palavra-chave muda o sentido da frase, indicando uma exceção?", options: ["inclusive", "sempre", "exceto", "portanto"], answer: 2, explanation: "Palavras como 'exceto', 'apenas', 'somente' e 'não' são cruciais, pois restringem ou negam a informação." },
            { topic: "Interpretação", question: "O que é a 'Tese' de um texto argumentativo?", options: ["O resumo do texto", "O título do texto", "A opinião principal defendida pelo autor", "Um exemplo usado no texto"], answer: 2, explanation: "A tese é a ideia central, o ponto de vista que o autor quer provar ou defender ao longo do texto." }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            // --- LÓGICA DO MODO DE APRENDIZAGEM ---
            const links = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('#learn-container main section');

            const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 }; // Ajustado para 0.1
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        links.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, observerOptions);

            sections.forEach(section => { observer.observe(section); });
            
            links.forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
                });
            });

            // --- LÓGICA DO MODO DE PRÁTICA ---
            const btnLearn = document.getElementById('btn-learn');
            const btnPractice = document.getElementById('btn-practice');
            const learnContainer = document.getElementById('learn-container');
            const practiceSection = document.getElementById('practice-section');
            
            const quizContainer = document.getElementById('quiz-container');
            const scoreScreen = document.getElementById('score-screen');
            const questionTopic = document.getElementById('question-topic');
            const questionText = document.getElementById('question-text');
            const optionsContainer = document.getElementById('options-container');
            const feedbackContainer = document.getElementById('feedback-container');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const questionCounter = document.getElementById('question-counter');
            const finalScore = document.getElementById('final-score');
            const scoreMessage = document.getElementById('score-message');
            const restartBtn = document.getElementById('restart-btn');
            const questionNavContainer = document.getElementById('question-nav-container');

            let state = {
                currentMode: 'learn',
                currentQuestionIndex: 0,
                userAnswers: [],
                score: 0,
            };

            function switchMode(mode) {
                state.currentMode = mode;
                btnLearn.classList.toggle('active', mode === 'learn');
                btnPractice.classList.toggle('active', mode !== 'learn');
                learnContainer.classList.toggle('hidden', mode !== 'learn');
                practiceSection.classList.toggle('hidden', mode === 'learn');

                if (mode === 'practice') {
                    startPractice();
                }
            }

            function startPractice() {
                state.currentQuestionIndex = 0;
                state.score = 0;
                state.userAnswers = Array(questions.length).fill(null);
                quizContainer.classList.remove('hidden');
                scoreScreen.classList.add('hidden');
                questionNavContainer.classList.remove('hidden');
                renderQuestionNavigation();
                renderQuestion(0);
            }
            
            function renderQuestion(index) {
                const question = questions[index];
                questionTopic.textContent = question.topic;
                questionText.textContent = question.question;
                questionCounter.textContent = `${index + 1} / ${questions.length}`;

                optionsContainer.innerHTML = '';
                feedbackContainer.innerHTML = '';

                question.options.forEach((option, i) => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.className = "w-full text-left p-4 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors disabled:cursor-not-allowed";
                    button.onclick = () => checkAnswer(i, question.answer, question.explanation);
                    optionsContainer.appendChild(button);
                });

                updateNavButtonsState();
                updateQuestionNavButtons();
            }

            function checkAnswer(selectedIndex, correctIndex, explanation) {
                const isCorrect = selectedIndex === correctIndex;
                const isFirstAttempt = state.userAnswers[state.currentQuestionIndex] === null;
                const wasPreviouslyWrong = state.userAnswers[state.currentQuestionIndex] === false;

                if (isFirstAttempt) {
                    state.userAnswers[state.currentQuestionIndex] = isCorrect; // Set state on first try
                    if (isCorrect) {
                        state.score++;
                        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                    }
                } else if (wasPreviouslyWrong && isCorrect) {
                    // This is the user's request: was wrong, retried, now correct
                    state.userAnswers[state.currentQuestionIndex] = true; // Update state to correct
                    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } }); // Fire confetti on correction
                }

                Array.from(optionsContainer.children).forEach((btn, i) => {
                    btn.disabled = true;
                    if (i === correctIndex) {
                        btn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
                        btn.classList.add('bg-green-600', 'text-white');
                    } else if (i === selectedIndex) {
                        btn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
                        btn.classList.add('bg-red-600', 'text-white');
                    }
                });

                feedbackContainer.innerHTML = `
                    <div class="p-4 rounded-lg ${isCorrect ? 'bg-success-dark' : 'bg-error-dark'}">
                        <h4 class="font-bold text-lg mb-2">${isCorrect ? 'Resposta Correta!' : 'Resposta Incorreta!'}</h4>
                        <p class="text-sm">${explanation}</p>
                        <button id="redo-question-btn" class="mt-4 py-2 px-4 accent-primary rounded-md font-semibold hover:accent-primary-dark transition-colors">Tentar Novamente</button>
                    </div>`;
                
                // Adiciona o listener para o novo botão
                document.getElementById('redo-question-btn').addEventListener('click', resetCurrentQuestion);
                
                updateQuestionNavButtons();
            }
            
            function resetCurrentQuestion() {
                // Limpa o feedback
                feedbackContainer.innerHTML = '';
                
                // Re-abilita as opções e reseta os estilos
                Array.from(optionsContainer.children).forEach(btn => {
                    btn.disabled = false;
                    btn.className = "w-full text-left p-4 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors disabled:cursor-not-allowed";
                });
            }

            function updateNavButtonsState() {
                prevBtn.disabled = state.currentQuestionIndex === 0;
                nextBtn.textContent = (state.currentQuestionIndex === questions.length - 1) ? "Finalizar" : "Próxima";
            }

            function nextQuestion() {
                if (state.currentQuestionIndex < questions.length - 1) {
                    goToQuestion(state.currentQuestionIndex + 1);
                } else {
                    showFinalScore();
                }
            }

            function prevQuestion() {
                if (state.currentQuestionIndex > 0) {
                   goToQuestion(state.currentQuestionIndex - 1);
                }
            }

            function goToQuestion(index) {
                if (index >= 0 && index < questions.length) {
                    state.currentQuestionIndex = index;
                    renderQuestion(index);
                }
            }

            function renderQuestionNavigation() {
                const grid = document.getElementById('question-buttons-grid');
                grid.innerHTML = '';
                for (let i = 0; i < questions.length; i++) {
                    const button = document.createElement('button');
                    button.textContent = i + 1;
                    button.className = 'w-9 h-9 flex items-center justify-center rounded-md font-semibold transition-all duration-200';
                    button.dataset.index = i;
                    button.onclick = () => goToQuestion(i);
                    grid.appendChild(button);
                }
            }
            
            function updateQuestionNavButtons() {
                const buttons = document.querySelectorAll('#question-buttons-grid button');
                buttons.forEach((btn, i) => {
                    // Reset classes, keeping base styles
                    btn.className = 'w-9 h-9 flex items-center justify-center rounded-md font-semibold transition-all duration-200';

                    const answerState = state.userAnswers[i];
                    
                    if (answerState === true) {
                        btn.classList.add('bg-green-600', 'text-white');
                    } else if (answerState === false) {
                        btn.classList.add('bg-red-600', 'text-white');
                    } else {
                        btn.classList.add('bg-gray-700', 'hover:bg-gray-600');
                    }

                    if (i === state.currentQuestionIndex) {
                        btn.classList.add('ring-2', 'ring-offset-2', 'ring-offset-gray-800', 'ring-orange-500'); /* Alterado para ring-orange-500 */
                        btn.classList.remove('hover:bg-gray-600');
                    }
                });
            }
            
            function showFinalScore() {
                quizContainer.classList.add('hidden');
                scoreScreen.classList.remove('hidden');
                questionNavContainer.classList.add('hidden');

                const percentage = Math.round((state.score / questions.length) * 100);
                finalScore.textContent = `${percentage}%`;

                let message = '';
                if (percentage >= 90) message = "Excelente! Você dominou o assunto!";
                else if (percentage >= 70) message = "Muito bom! Continue praticando para aperfeiçoar.";
                else if (percentage >= 50) message = "Bom esforço! Reveja os tópicos que errou.";
                else message = "Não desanime! Reveja a seção 'Aprender' e tente novamente.";
                
                scoreMessage.textContent = `Você acertou ${state.score} de ${questions.length} questões. ${message}`;
            }

            // --- INICIALIZAÇÃO ---
            // Assegura que os botões de modo tenham a cor correta no início
            btnLearn.classList.add('active'); // Começa no modo 'learn'
            
            btnLearn.addEventListener('click', () => switchMode('learn'));
            btnPractice.addEventListener('click', () => switchMode('practice'));
            prevBtn.addEventListener('click', prevQuestion);
            nextBtn.addEventListener('click', nextQuestion);
            restartBtn.addEventListener('click', startPractice);

            // Garante que o estado inicial (learn) esteja correto
            switchMode('learn');
        });
    </script>
</body>
</html>
