<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Estudo de Tri√¢ngulos ‚Äì Resumo e 30 Quest√µes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root{
            --bg:#071023; --card:#0b1624; --accent:#3b82f6; --muted:#97a6bf; --text:#e6eef8; --success:#34d399; --danger:#ef4444; --border:rgba(255,255,255,0.04); --muted-2: rgba(230,238,248,0.85);
        }
        html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); color:var(--text);}
        .container{max-width:980px;margin:28px auto;padding:18px}
        .page-header{ padding:1.25rem; border-radius:12px; background: linear-gradient(180deg, rgba(59,130,246,0.06), transparent); box-shadow: 0 8px 24px rgba(2,6,23,0.6); }
        .card{ background: var(--card); color: var(--text); border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 6px 20px rgba(2,6,23,0.6); padding:18px }
        .btn-primary{ background: linear-gradient(90deg,var(--accent), #3b82f6); color: #061226; padding: .5rem 1.25rem; border-radius: 10px; border: none; box-shadow: 0 6px 18px rgba(59,130,246,0.12); cursor: pointer; }
        .btn-ghost{ background: transparent; color: var(--muted-2); padding: .45rem .9rem; border-radius: 10px; border: 1px solid var(--border); cursor:pointer; }
        .option-btn{ display:block; width:100%; text-align:left; padding:.75rem 1rem; border-radius:10px; background: rgba(255,255,255,0.02); border:1px solid var(--border); color:var(--muted-2); cursor:pointer; transition: transform 150ms ease, background 150ms ease; }
        .option-btn:hover:not(:disabled){ background: rgba(255,255,255,0.035); transform: translateY(-1px); }
        .option-btn.correct{ background: var(--success) !important; color: #062e1f !important; border-color: rgba(4,120,87,0.18) !important; }
        .option-btn.wrong{ background: var(--danger) !important; color: #fff !important; border-color: rgba(185,28,28,0.18) !important; }
        .option-btn:disabled { cursor: not-allowed; }
        #question-buttons{ display:flex; flex-wrap:wrap; gap:8px; }
        #question-buttons button{ background: transparent; color: var(--muted-2); border:1px solid var(--border); padding:.45rem .6rem; border-radius:8px; cursor:pointer; }
        #question-buttons button.current-question { background-color: rgba(59, 130, 246, 0.2); border-color: var(--accent); }
        .feedback-correct{ background: rgba(16,185,129,0.12); border:1px solid rgba(16,185,129,0.22); color: #bbf7d0; padding:12px; border-radius:8px }
        .feedback-wrong{ background: rgba(239,68,68,0.12); border:1px solid rgba(239,68,68,0.22); color: #ffdede; padding:12px; border-radius:8px }
        .celebrate{ animation: pop 480ms cubic-bezier(.2,.9,.3,1); box-shadow: 0 12px 36px rgba(96,165,250,0.18), 0 0 28px rgba(16,185,129,0.12); }
        @keyframes pop{ 0%{ transform: scale(1); } 50%{ transform: scale(1.08); } 100%{ transform: scale(1); } }
        .confetti{ position: fixed; z-index: 9999; pointer-events: none; font-size: 18px; opacity: 1; transform-origin: center; }
        @keyframes confetti-fall { 0%{ transform: translateY(-10vh) rotate(0deg); opacity:1 } 100%{ transform: translateY(100vh) rotate(540deg); opacity:0 } }
        .theme-light{ --bg: #f8fafc; --card: #ffffff; --muted: #475569; --text: #0f1724; --accent: #0284c7; --success: #047857; --danger: #b91c1c; --border: rgba(15,23,42,0.06); --muted-2: rgba(15,23,36,0.85); }
    </style>
</head>
<body class="antialiased">
    <div class="container">
        <header class="page-header">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold">Estudo de Tri√¢ngulos</h1>
                    <p class="text-sm text-slate-400">Resumo dos principais conceitos + 30 quest√µes para pr√°tica.</p>
                </div>
                <div>
                    <button id="theme-toggle" class="btn-ghost">Tema</button>
                </div>
            </div>
        </header>

        <main class="mt-6">
            <div class="card">
                <nav class="mb-4">
                    <button id="btn-learn" class="btn-primary">Aprender</button>
                    <button id="btn-practice" class="btn-ghost ml-2">Praticar</button>
                </nav>

                <section id="learn-section">
                    <div class="space-y-6">
                        <div>
                            <h2 class="text-xl font-semibold text-[var(--accent)]">1. Tipos de Tri√¢ngulos</h2>
                            <p class="mt-2 text-sm text-slate-300">Tri√¢ngulos podem ser classificados de duas formas principais: pelos seus lados ou pelos seus √¢ngulos.</p>
                            <h3 class="text-lg font-semibold mt-4">Classifica√ß√£o quanto aos Lados</h3>
                            <ul class="mt-2 text-sm list-disc list-inside space-y-1">
                                <li><strong>Equil√°tero:</strong> Possui os tr√™s lados com medidas iguais. Consequentemente, seus tr√™s √¢ngulos tamb√©m s√£o iguais (60¬∞ cada).</li>
                                <li><strong>Is√≥sceles:</strong> Possui dois lados com medidas iguais. O lado diferente √© chamado de base, e os √¢ngulos da base s√£o iguais.</li>
                                <li><strong>Escaleno:</strong> Possui os tr√™s lados com medidas diferentes. Seus tr√™s √¢ngulos tamb√©m s√£o diferentes.</li>
                            </ul>
                            <h3 class="text-lg font-semibold mt-4">Classifica√ß√£o quanto aos √Çngulos</h3>
                            <ul class="mt-2 text-sm list-disc list-inside space-y-1">
                                <li><strong>Ret√¢ngulo:</strong> Possui um √¢ngulo reto, ou seja, um √¢ngulo de exatamente 90¬∞.</li>
                                <li><strong>Acut√¢ngulo:</strong> Possui os tr√™s √¢ngulos agudos, ou seja, todos menores que 90¬∞.</li>
                                <li><strong>Obtus√¢ngulo:</strong> Possui um √¢ngulo obtuso, ou seja, um √¢ngulo maior que 90¬∞.</li>
                            </ul>
                        </div>
                        <hr class="border-[var(--border)]">
                        <div>
                             <h2 class="text-xl font-semibold text-[var(--accent)]">2. Soma dos √Çngulos Internos</h2>
                             <p class="mt-2 text-sm">Uma das propriedades mais importantes dos tri√¢ngulos √© que a soma de seus tr√™s √¢ngulos internos √© sempre igual a <strong>180¬∞</strong>.</p>
                             <p class="mt-2 p-3 bg-gray-800/20 rounded-lg text-center font-mono">√Çngulo A + √Çngulo B + √Çngulo C = 180¬∞</p>
                             <p class="mt-2 text-sm">Essa regra √© v√°lida para qualquer tipo de tri√¢ngulo, seja ele ret√¢ngulo, is√≥sceles, escaleno, etc. Sabendo a medida de dois √¢ngulos, voc√™ sempre pode descobrir a do terceiro.</p>
                        </div>
                        <hr class="border-[var(--border)]">
                        <div>
                             <h2 class="text-xl font-semibold text-[var(--accent)]">3. Condi√ß√£o de Exist√™ncia</h2>
                             <p class="mt-2 text-sm">Para que seja poss√≠vel construir um tri√¢ngulo com tr√™s medidas de lados (a, b, c), uma regra deve ser obedecida: <strong>a medida de qualquer lado deve ser sempre menor que a soma das medidas dos outros dois lados</strong>.</p>
                             <ul class="mt-2 p-3 bg-gray-800/20 rounded-lg space-y-1 font-mono text-center">
                                 <li>a &lt; b + c</li>
                                 <li>b &lt; a + c</li>
                                 <li>c &lt; a + b</li>
                             </ul>
                             <p class="mt-2 text-sm">Se essa condi√ß√£o n√£o for satisfeita para qualquer um dos lados, os segmentos n√£o "fechar√£o" para formar um tri√¢ngulo.</p>
                        </div>
                    </div>
                </section>

                <section id="practice-section" class="hidden">
                    <div id="question-buttons" class="mb-4"></div>
                    <div id="quiz-container">
                        </div>
                </section>
            </div>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const root = document.documentElement;
        const themeToggle = document.getElementById('theme-toggle');
        const btnLearn = document.getElementById('btn-learn');
        const btnPractice = document.getElementById('btn-practice');
        const learnSection = document.getElementById('learn-section');
        const practiceSection = document.getElementById('practice-section');
        const questionButtons = document.getElementById('question-buttons');
        const quizContainer = document.getElementById('quiz-container');

        if(!btnLearn || !btnPractice || !learnSection || !practiceSection || !questionButtons || !quizContainer){
            console.error('Elementos DOM n√£o encontrados.');
            return;
        }

        (function(){
            const t = localStorage.getItem('tri-theme') || 'dark';
            if(t === 'light') root.classList.add('theme-light');
            themeToggle.addEventListener('click', () => {
                root.classList.toggle('theme-light');
                localStorage.setItem('tri-theme', root.classList.contains('theme-light') ? 'light' : 'dark');
            });
        })();
        
        const quizData = [
            // T√≥pico 1: Tipos de Tri√¢ngulos (10 quest√µes)
            { q: '1) Um tri√¢ngulo com lados medindo 7cm, 7cm e 10cm √© classificado como?', options: ['Is√≥sceles', 'Equil√°tero', 'Escaleno', 'Ret√¢ngulo'], answer: 'Is√≥sceles', explanation: 'Possui dois lados iguais (7cm).'},
            { q: '2) Se um tri√¢ngulo tem um √¢ngulo de 90¬∞, como ele √© classificado?', options: ['Ret√¢ngulo', 'Acut√¢ngulo', 'Obtus√¢ngulo', 'Equil√°tero'], answer: 'Ret√¢ngulo', explanation: 'A defini√ß√£o de tri√¢ngulo ret√¢ngulo √© possuir um √¢ngulo reto (90¬∞).'},
            { q: '3) Um tri√¢ngulo cujos lados medem 5cm, 6cm e 7cm √© um...', options: ['Escaleno', 'Is√≥sceles', 'Equil√°tero', 'Obtus√¢ngulo'], answer: 'Escaleno', explanation: 'Todos os tr√™s lados t√™m medidas diferentes.'},
            { q: '4) Todos os √¢ngulos internos de um tri√¢ngulo medem 60¬∞. Qual a sua classifica√ß√£o quanto aos lados?', options: ['Equil√°tero', 'Is√≥sceles', 'Escaleno', 'Ret√¢ngulo'], answer: 'Equil√°tero', explanation: 'Se todos os √¢ngulos s√£o iguais, todos os lados tamb√©m s√£o iguais.'},
            { q: '5) Um tri√¢ngulo possui √¢ngulos de 40¬∞, 50¬∞ e 90¬∞. Sua classifica√ß√£o quanto aos √¢ngulos √©?', options: ['Ret√¢ngulo', 'Acut√¢ngulo', 'Obtus√¢ngulo', 'Escaleno'], answer: 'Ret√¢ngulo', explanation: 'A presen√ßa de um √¢ngulo de 90¬∞ o classifica como ret√¢ngulo.'},
            { q: '6) Um tri√¢ngulo com um √¢ngulo medindo 110¬∞ √© classificado como?', options: ['Obtus√¢ngulo', 'Acut√¢ngulo', 'Ret√¢ngulo', 'Is√≥sceles'], answer: 'Obtus√¢ngulo', explanation: 'Possui um √¢ngulo obtuso (maior que 90¬∞).'},
            { q: '7) Qual tipo de tri√¢ngulo possui dois lados iguais e um diferente?', options: ['Is√≥sceles', 'Equil√°tero', 'Escaleno', 'Ret√¢ngulo'], answer: 'Is√≥sceles', explanation: '√â a defini√ß√£o de um tri√¢ngulo is√≥sceles.'},
            { q: '8) Um tri√¢ngulo com √¢ngulos 70¬∞, 60¬∞, 50¬∞ √© classificado como?', options: ['Acut√¢ngulo', 'Obtus√¢ngulo', 'Ret√¢ngulo', 'Equil√°tero'], answer: 'Acut√¢ngulo', explanation: 'Todos os seus √¢ngulos s√£o agudos (menores que 90¬∞).'},
            { q: '9) Se um tri√¢ngulo √© equil√°tero, ele tamb√©m √©:', options: ['Acut√¢ngulo', 'Ret√¢ngulo', 'Obtus√¢ngulo', 'Escaleno'], answer: 'Acut√¢ngulo', explanation: 'Todo tri√¢ngulo equil√°tero tem tr√™s √¢ngulos de 60¬∞, que s√£o todos agudos.'},
            { q: '10) Um tri√¢ngulo is√≥sceles pode ser um tri√¢ngulo ret√¢ngulo?', options: ['Sim', 'N√£o', 'Somente se for equil√°tero', 'Somente se for escaleno'], answer: 'Sim', explanation: 'Sim, um tri√¢ngulo com √¢ngulos 90¬∞, 45¬∞ e 45¬∞ √© tanto is√≥sceles quanto ret√¢ngulo.'},
            
            // T√≥pico 2: Soma dos √Çngulos Internos (10 quest√µes)
            { q: '11) Dois √¢ngulos de um tri√¢ngulo medem 50¬∞ e 70¬∞. Qual a medida do terceiro √¢ngulo?', options: ['60¬∞', '50¬∞', '70¬∞', '180¬∞'], answer: '60¬∞', explanation: '180¬∞ - (50¬∞ + 70¬∞) = 180¬∞ - 120¬∞ = 60¬∞.'},
            { q: '12) Em um tri√¢ngulo ret√¢ngulo, um dos √¢ngulos agudos mede 35¬∞. Qual a medida do outro?', options: ['55¬∞', '45¬∞', '65¬∞', '90¬∞'], answer: '55¬∞', explanation: 'Os √¢ngulos agudos somam 90¬∞. Ent√£o, 90¬∞ - 35¬∞ = 55¬∞.'},
            { q: '13) Os √¢ngulos de um tri√¢ngulo s√£o x, 2x e 3x. Qual o valor de x?', options: ['30¬∞', '45¬∞', '60¬∞', '90¬∞'], answer: '30¬∞', explanation: 'x + 2x + 3x = 180¬∞ ‚Üí 6x = 180¬∞ ‚Üí x = 30¬∞.'},
            { q: '14) Um tri√¢ngulo is√≥sceles tem um √¢ngulo de v√©rtice (o √¢ngulo diferente) medindo 100¬∞. Quais s√£o as medidas dos √¢ngulos da base?', options: ['40¬∞ cada', '50¬∞ cada', '80¬∞ cada', '100¬∞ cada'], answer: '40¬∞ cada', explanation: '180¬∞ - 100¬∞ = 80¬∞. Como os √¢ngulos da base s√£o iguais, 80¬∞ / 2 = 40¬∞.'},
            { q: '15) √â poss√≠vel existir um tri√¢ngulo com dois √¢ngulos de 95¬∞?', options: ['N√£o', 'Sim', 'Apenas se for is√≥sceles', 'Apenas se for escaleno'], answer: 'N√£o', explanation: 'A soma de dois √¢ngulos de 95¬∞ j√° √© 190¬∞, que ultrapassa o total de 180¬∞.'},
            { q: '16) Qual √© a soma dos √¢ngulos internos de QUALQUER tri√¢ngulo?', options: ['180¬∞', '360¬∞', '90¬∞', 'Depende do tri√¢ngulo'], answer: '180¬∞', explanation: 'A soma dos √¢ngulos internos √© sempre 180¬∞ para qualquer tri√¢ngulo.'},
            { q: '17) Em um tri√¢ngulo, os √¢ngulos medem 45¬∞ e 45¬∞. Qual o terceiro √¢ngulo?', options: ['90¬∞', '45¬∞', '60¬∞', '100¬∞'], answer: '90¬∞', explanation: '180¬∞ - (45¬∞ + 45¬∞) = 180¬∞ - 90¬∞ = 90¬∞.'},
            { q: '18) Um dos √¢ngulos da base de um tri√¢ngulo is√≥sceles mede 55¬∞. Qual a medida do √¢ngulo do v√©rtice?', options: ['70¬∞', '55¬∞', '60¬∞', '110¬∞'], answer: '70¬∞', explanation: 'Os dois √¢ngulos da base somam 55¬∞ + 55¬∞ = 110¬∞. O √¢ngulo do v√©rtice √© 180¬∞ - 110¬∞ = 70¬∞.'},
            { q: '19) Um tri√¢ngulo pode ter dois √¢ngulos obtusos?', options: ['N√£o', 'Sim', 'Sim, se for grande', 'Sim, se for escaleno'], answer: 'N√£o', explanation: 'Um √¢ngulo obtuso √© > 90¬∞. Dois deles somariam mais de 180¬∞, o que √© imposs√≠vel.'},
            { q: '20) Se os tr√™s √¢ngulos de um tri√¢ngulo s√£o iguais, qual a medida de cada um?', options: ['60¬∞', '90¬∞', '30¬∞', '45¬∞'], answer: '60¬∞', explanation: '180¬∞ dividido por 3 √¢ngulos iguais resulta em 60¬∞ cada.'},

            // T√≥pico 3: Condi√ß√£o de Exist√™ncia (10 quest√µes)
            { q: '21) √â poss√≠vel formar um tri√¢ngulo com lados medindo 5, 8 e 12?', options: ['Sim', 'N√£o'], answer: 'Sim', explanation: 'Sim, pois 5+8 > 12 (13>12), 5+12 > 8 e 8+12 > 5.'},
            { q: '22) Quais das seguintes medidas N√ÉO podem formar um tri√¢ngulo?', options: ['3, 4, 8', '5, 5, 5', '6, 8, 10', '7, 10, 15'], answer: '3, 4, 8', explanation: 'N√£o √© poss√≠vel, pois 3 + 4 (que √© 7) n√£o √© maior que 8.'},
            { q: '23) Para formar um tri√¢ngulo com lados 7 e 10, o terceiro lado pode medir...', options: ['5', '3', '17', '2'], answer: '5', explanation: 'O terceiro lado (x) deve ser x < 7+10 (x<17) e x > 10-7 (x>3). 5 est√° nesse intervalo.'},
            { q: '24) √â poss√≠vel formar um tri√¢ngulo com lados medindo 1, 2 e 3?', options: ['N√£o', 'Sim'], answer: 'N√£o', explanation: 'N√£o, pois a soma 1 + 2 = 3, e a regra exige que a soma seja ESTRITAMENTE maior que o terceiro lado.'},
            { q: '25) Qual √© a regra principal para a exist√™ncia de um tri√¢ngulo?', options: ['Um lado < soma dos outros dois', 'Um lado > soma dos outros dois', 'Todos os lados iguais', 'Dois lados iguais'], answer: 'Um lado < soma dos outros dois', explanation: 'A medida de qualquer lado deve ser menor que a soma das medidas dos outros dois.'},
            { q: '26) √â poss√≠vel formar um tri√¢ngulo com lados medindo 20, 30 e 50?', options: ['N√£o', 'Sim'], answer: 'N√£o', explanation: 'N√£o, porque 20 + 30 = 50. A soma deve ser maior, n√£o igual.'},
            { q: '27) Se dois lados de um tri√¢ngulo is√≥sceles medem 9 e 4, qual a medida do terceiro lado?', options: ['9', '4', '13', '5'], answer: '9', explanation: 'Se fosse 4, ter√≠amos lados 4, 4, 9. Mas 4+4=8, que n√£o √© > 9. Logo, os lados devem ser 9, 9, 4.'},
            { q: '28) Quais das seguintes medidas PODEM formar um tri√¢ngulo?', options: ['10, 12, 15', '1, 5, 7', '2, 8, 11', '4, 4, 9'], answer: '10, 12, 15', explanation: '10+12 > 15. As outras op√ß√µes falham na condi√ß√£o de exist√™ncia (1+5<7, 2+8<11, 4+4<9).'},
            { q: '29) Um tri√¢ngulo pode ter lados medindo 6cm, 6cm e 13cm?', options: ['N√£o', 'Sim'], answer: 'N√£o', explanation: 'A soma dos lados menores (6+6=12) n√£o √© maior que o terceiro lado (13).'},
            { q: '30) Para que um tri√¢ngulo com lados 5 e 12 exista, o terceiro lado (x) deve estar entre quais valores?', options: ['7 < x < 17', '5 < x < 12', 'x > 17', 'x < 7'], answer: '7 < x < 17', explanation: 'Pela regra, x < 12+5 (x<17) e x > 12-5 (x>7).'}
        ];

        let questionOrder = quizData.map((_,i)=>i);
        let currentIndex = 0;
        let questionStatus = Array(quizData.length).fill(null);
        let quizStarted = false;

        function switchView(view){
            if(view==='learn'){
                practiceSection.classList.add('hidden');
                learnSection.classList.remove('hidden');
                btnLearn.classList.replace('btn-ghost', 'btn-primary');
                btnPractice.classList.replace('btn-primary', 'btn-ghost');
            } else {
                learnSection.classList.add('hidden');
                practiceSection.classList.remove('hidden');
                btnPractice.classList.replace('btn-ghost', 'btn-primary');
                btnLearn.classList.replace('btn-primary', 'btn-ghost');
                if (!quizStarted) {
                    startQuiz();
                    quizStarted = true;
                }
            }
        }

        btnLearn.addEventListener('click', () => switchView('learn'));
        btnPractice.addEventListener('click', () => switchView('practice'));

        function renderQuestionButtons(){
            questionButtons.innerHTML='';
            quizData.forEach((_,originalIndex)=>{
                const b = document.createElement('button');
                b.textContent = (originalIndex + 1);
                b.setAttribute('data-original-index', String(originalIndex));
                b.title = `Ir para a quest√£o ${originalIndex+1}`;
                b.onclick = ()=>{
                    const pos = questionOrder.indexOf(originalIndex);
                    if(pos >= 0){ currentIndex = pos; showQuestion(); }
                };
                if(questionStatus[originalIndex]==='correct') b.classList.add('text-green-400');
                if(questionStatus[originalIndex]==='wrong') b.classList.add('text-red-400');
                
                if (quizStarted) {
                    const currentQuestionOriginalIndex = questionOrder[currentIndex];
                    if(originalIndex === currentQuestionOriginalIndex) {
                        b.classList.add('current-question');
                    }
                }
                
                questionButtons.appendChild(b);
            });
        }

        const questionProgress = document.createElement('p');
        questionProgress.className='text-sm text-slate-400';
        const questionText = document.createElement('p');
        questionText.className='text-xl mt-2';
        const optionsContainer = document.createElement('div');
        optionsContainer.className='mt-4 grid gap-3';
        const feedbackContainer = document.createElement('div');
        const nextBtn = document.createElement('button');
        nextBtn.className='btn-primary mt-4'; nextBtn.textContent='Pr√≥xima';
        const redoBtn = document.createElement('button');
        redoBtn.className='btn-ghost mt-4 ml-3'; redoBtn.textContent='Refazer';

        quizContainer.appendChild(questionProgress);
        quizContainer.appendChild(questionText);
        quizContainer.appendChild(optionsContainer);
        quizContainer.appendChild(feedbackContainer);
        quizContainer.appendChild(nextBtn);
        quizContainer.appendChild(redoBtn);

        function startQuiz(){
            shuffleArray(questionOrder);
            currentIndex = 0;
            questionStatus.fill(null);
            showQuestion();
        }

        function showQuestion(){
            if (currentIndex >= questionOrder.length) {
                showFinalResults();
                return;
            }
        
            const qIdx = questionOrder[currentIndex];
            const qObj = quizData[qIdx];
            
            questionProgress.textContent = `Quest√£o ${currentIndex+1} de ${quizData.length}`;
            let cleaned = String(qObj.q || '').replace(/^[\s\d\)\(\.\:\-‚Äì‚Äî_]+/,'').trim();
            questionText.innerHTML = `${currentIndex+1}) ${cleaned}`;
            
            optionsContainer.innerHTML='';
            feedbackContainer.innerHTML='';
            redoBtn.classList.add('hidden');
            nextBtn.disabled = true;

            qObj.options.forEach(opt =>{
                const b = document.createElement('button');
                b.className='option-btn'; b.textContent=opt;
                b.onclick = ()=> selectAnswer(b,opt,qObj.answer,qObj.explanation,qIdx);
                optionsContainer.appendChild(b);
            });

            renderQuestionButtons();
        }
        
        function showFinalResults() {
            const correctCount = questionStatus.filter(s => s === 'correct').length;
            const total = quizData.length;
            questionProgress.textContent = `Quiz finalizado!`;
            questionText.innerHTML = `üéâ Fim do Quiz! üéâ`;
            optionsContainer.innerHTML = `<p class="text-center text-lg">Voc√™ acertou ${correctCount} de ${total} quest√µes.</p>`;
            feedbackContainer.innerHTML = '';
            nextBtn.textContent = 'Recome√ßar Quiz';
            nextBtn.disabled = false;
            nextBtn.onclick = () => {
                quizStarted = false;
                startQuiz(); 
                quizStarted = true;
            };
            redoBtn.classList.add('hidden');
        }

        function selectAnswer(btn,opt,correct,explanation,qIdx){
            Array.from(optionsContainer.children).forEach(b=>b.disabled=true);
            nextBtn.disabled = false;

            if(opt===correct){
                btn.classList.add('celebrate','correct');
                createConfetti();
                questionStatus[qIdx]='correct';
                feedbackContainer.className='feedback-correct mt-4';
                feedbackContainer.textContent = 'Correto! ' + (explanation || '');
            } else {
                btn.classList.add('wrong');
                questionStatus[qIdx]='wrong';
                feedbackContainer.className='feedback-wrong mt-4';
                feedbackContainer.innerHTML = `<strong>Errado.</strong> Resposta correta: <strong>${correct}</strong>.`;
                if(explanation) feedbackContainer.innerHTML += `<div class="mt-2 text-sm">${explanation}</div>`;
                
                Array.from(optionsContainer.children).forEach(b=>{
                    if(b.textContent === correct) b.classList.add('correct');
                });
                redoBtn.classList.remove('hidden');
            }
            renderQuestionButtons();
        }

        nextBtn.addEventListener('click', ()=>{
            if(currentIndex < questionOrder.length-1){ 
                currentIndex++; 
                showQuestion(); 
            } else { 
                currentIndex++;
                showFinalResults();
            }
        });

        redoBtn.addEventListener('click', ()=>{
            const currentQuestionIndex = questionOrder[currentIndex];
            questionStatus[currentQuestionIndex] = null;
            showQuestion();
        });

        function shuffleArray(a){
            for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; }
        }

        function createConfetti(){
            const colors = ['#f59e0b','#ef4444','#10b981','#3b82f6','#8b5cf6'];
            for(let i=0;i<12;i++){
                const el = document.createElement('div');
                el.className='confetti';
                el.style.left = (30 + Math.random()*40) + '%';
                el.style.top = (10 + Math.random()*10) + 'vh';
                el.style.color = colors[Math.floor(Math.random()*colors.length)];
                el.textContent = 'üéâ';
                el.style.transform = `rotate(${Math.random()*360}deg)`;
                el.style.animation = `confetti-fall ${1.2 + Math.random()*1}s linear forwards`;
                document.body.appendChild(el);
                setTimeout(()=> el.remove(), 2200);
            }
        }
        
        switchView('learn');
    });
    </script>
</body>
</html>