<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Matem√°tica ‚Äì 7¬∫ Ano</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root{
            --bg:#071023; --card:#0b1624; --accent:#3b82f6; --muted:#97a6bf; --text:#e6eef8; --success:#34d399; --danger:#ef4444; --border:rgba(255,255,255,0.12); --muted-2: rgba(230,238,248,0.85);
        }
        html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); color:var(--text);}
        .container{max-width:980px;margin:28px auto;padding:18px}
        .page-header{ padding:1.25rem; border-radius:12px; background: linear-gradient(180deg, rgba(59,130,246,0.06), transparent); box-shadow: 0 8px 24px rgba(2,6,23,0.6); }
        .card{ background: var(--card); color: var(--text); border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 6px 20px rgba(2,6,23,0.6); padding:18px }
        .btn-primary{ background: linear-gradient(90deg,var(--accent), #3b82f6); color: #061226; padding: .5rem 1.25rem; border-radius: 10px; border: 1px solid rgba(255,255,255,0.4); box-shadow: 0 6px 18px rgba(59,130,246,0.12); cursor: pointer; }
        .btn-ghost{ background: transparent; color: var(--muted-2); padding: .45rem .9rem; border-radius: 10px; border: 1px solid var(--border); cursor:pointer; }
        .option-btn{ display:block; width:100%; text-align:left; padding:.75rem 1rem; border-radius:10px; background: rgba(255,255,255,0.02); border:1px solid var(--border); color:var(--muted-2); cursor:pointer; transition: transform 150ms ease, background 150ms ease; }
        .option-btn:hover:not(:disabled){ background: rgba(255,255,255,0.035); transform: translateY(-1px); }
        .option-btn.correct{ background: var(--success) !important; color: #062e1f !important; border-color: rgba(4,120,87,0.18) !important; }
        .option-btn.wrong{ background: var(--danger) !important; color: #fff !important; border-color: rgba(185,28,28,0.18) !important; }
        .option-btn:disabled { cursor: not-allowed; }
        #question-buttons{ display:flex; flex-wrap:wrap; gap:8px; }
        #question-buttons button{ background: transparent; color: var(--muted-2); border:1px solid var(--border); padding:.45rem .6rem; border-radius:8px; cursor:pointer; }
        #question-buttons button.current-question { background-color: rgba(59, 130, 246, 0.2); border-color: var(--accent); }
        #question-buttons button.correct-status { background-color: var(--success); color: #062e1f; border-color: var(--success); }
        #question-buttons button.wrong-status { background-color: var(--danger); color: white; border-color: var(--danger); }
        .feedback-correct{ background: rgba(16,185,129,0.12); border:1px solid rgba(16,185,129,0.22); color: #bbf7d0; padding:12px; border-radius:8px }
        .feedback-wrong{ background: rgba(239,68,68,0.12); border:1px solid rgba(239,68,68,0.22); color: #ffdede; padding:12px; border-radius:8px }
        .celebrate{ animation: pop 480ms cubic-bezier(.2,.9,.3,1); box-shadow: 0 12px 36px rgba(96,165,250,0.18), 0 0 28px rgba(16,185,129,0.12); }
        @keyframes pop{ 0%{ transform: scale(1); } 50%{ transform: scale(1.08); } 100%{ transform: scale(1); } }
        .confetti{ position: fixed; z-index: 9999; pointer-events: none; font-size: 18px; opacity: 1; transform-origin: center; }
        @keyframes confetti-fall { 0%{ transform: translateY(-10vh) rotate(0deg); opacity:1 } 100%{ transform: translateY(100vh) rotate(540deg); opacity:0 } }
        .theme-light{ --bg: #f8fafc; --card: #ffffff; --muted: #475569; --text: #0f1724; --accent: #0284c7; --success: #047857; --danger: #b91c1c; --border: rgba(15,23,42,0.1); --muted-2: rgba(15,23,36,0.85); }
        .topic-section { margin-bottom: 2.5rem; border-left: 3px solid var(--accent); padding-left: 1.5rem; }
        .topic-title { font-size: 1.5rem; font-weight: 700; color: var(--accent); margin-bottom: 1rem; }
        .sub-topic-title { font-size: 1.15rem; font-weight: 600; color: var(--text); margin-top: 1.5rem; margin-bottom: 0.75rem; }
        .topic-section p, .topic-section ul { font-size: 1rem; color: var(--muted-2); line-height: 1.7; text-align: justify; }
        .topic-section ul { list-style-position: inside; list-style-type: disc; margin-top: 0.5rem; padding-left: 1rem;}
        .highlight { background-color: rgba(59, 130, 246, 0.1); padding: 0.2rem 0.4rem; border-radius: 4px; font-weight: 600; color: var(--accent); }
        .formula { background-color: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px; margin-top: 1rem; font-family: 'Courier New', Courier, monospace; text-align: center; font-size: 1.1rem; }
        .difficulty-badge { padding: 0.1rem 0.6rem; border-radius: 99px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
        .difficulty-facil { background-color: rgba(52, 211, 153, 0.2); color: #6ee7b7; }
        .difficulty-medio { background-color: rgba(250, 204, 21, 0.2); color: #facc15; }
        .difficulty-dificil { background-color: rgba(248, 113, 113, 0.2); color: #f87171; }
        .question-tags { display: flex; gap: 8px; margin-bottom: 12px; align-items: center; }
        .topic-badge { padding: 0.1rem 0.6rem; border-radius: 99px; font-size: 0.75rem; font-weight: 600; background-color: rgba(59, 130, 246, 0.2); color: var(--accent); }
    </style>
</head>
<body class="antialiased">
    <div class="container">
        <header class="page-header">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold">Matem√°tica ‚Äî 7¬∫ Ano</h1>
                    <p class="text-sm text-slate-400">Guia de estudos: N√∫meros, Potencia√ß√£o e Geometria.</p>
                </div>
                <div>
                    <button id="theme-toggle" class="btn-ghost">Tema</button>
                </div>
            </div>
        </header>

        <main class="mt-6">
            <div class="card">
                <nav class="mb-4">
                    <button id="btn-learn" class="btn-primary">Aprender</button>
                    <button id="btn-practice" class="btn-ghost ml-2">Praticar</button>
                </nav>

                <section id="learn-section">
                    <div class="space-y-8">
                        
                        <div class="topic-section">
                            <h2 class="topic-title">Opera√ß√µes com N√∫meros Decimais</h2>
                            <h3 class="sub-topic-title">Multiplica√ß√£o de Decimais</h3>
                            <p>Para multiplicar n√∫meros decimais, siga dois passos: 1) Multiplique os n√∫meros como se fossem inteiros, ignorando as v√≠rgulas. 2) Conte o <span class="highlight">total de casas decimais</span> nos fatores e coloque a v√≠rgula no resultado, contando da direita para a esquerda.</p>
                            <ul>
                                <li><strong>Exemplo 1:</strong> 2,5 x 0,3 -> Fazemos 25 x 3 = 75. O n√∫mero 2,5 tem 1 casa decimal e 0,3 tem 1 casa decimal (total de 2 casas). O resultado √© <span class="highlight">0,75</span>.</li>
                                <li><strong>Exemplo 2:</strong> 1,25 x 0,4 -> Fazemos 125 x 4 = 500. 1,25 tem 2 casas e 0,4 tem 1 (total de 3 casas). O resultado √© <span class="highlight">0,500</span> ou 0,5.</li>
                                <li><strong>Exemplo 3:</strong> 4 x 0,8 -> Fazemos 4 x 8 = 32. 0,8 tem 1 casa decimal. O resultado √© <span class="highlight">3,2</span>.</li>
                            </ul>
                            <h3 class="sub-topic-title">Divis√£o de Decimais</h3>
                            <p>Para dividir n√∫meros decimais: 1) Iguale o n√∫mero de casas decimais dos dois n√∫meros acrescentando zeros. 2) "Corte" as v√≠rgulas. 3) Efetue a divis√£o como se fossem n√∫meros inteiros.</p>
                             <ul>
                                <li><strong>Exemplo 1:</strong> 1,2 √∑ 0,03 -> Igualamos as casas: 1,20 √∑ 0,03. Cortamos as v√≠rgulas: 120 √∑ 3. O resultado √© <span class="highlight">40</span>.</li>
                                <li><strong>Exemplo 2:</strong> 7 √∑ 1,4 -> Igualamos as casas: 7,0 √∑ 1,4. Cortamos as v√≠rgulas: 70 √∑ 14. O resultado √© <span class="highlight">5</span>.</li>
                                <li><strong>Exemplo 3:</strong> 0,5 √∑ 2 -> Igualamos as casas: 0,5 √∑ 2,0. Cortamos as v√≠rgulas: 5 √∑ 20. Como n√£o d√°, acrescentamos 0 e v√≠rgula: 50 √∑ 20 = <span class="highlight">0,25</span>.</li>
                            </ul>
                        </div>
                        
                        <div class="topic-section">
                             <h2 class="topic-title">Potencia√ß√£o e Raiz Quadrada</h2>
                             <p>Potencia√ß√£o √© uma multiplica√ß√£o de fatores iguais. Em <span class="highlight">a‚Åø</span>, 'a' √© a base e 'n' √© o expoente, que indica quantas vezes a base se multiplica por si mesma.</p>
                             <h3 class="sub-topic-title">C√°lculos com Fra√ß√µes e Decimais</h3>
                             <ul>
                                <li><strong>Fra√ß√£o:</strong> Eleva-se o numerador e o denominador ao expoente. Ex: (2/3)¬≥ = 2¬≥ / 3¬≥ = <span class="highlight">8/27</span>.</li>
                                <li><strong>Decimal:</strong> Calcule a pot√™ncia como se fosse um n√∫mero inteiro e posicione a v√≠rgula. O n√∫mero de casas decimais do resultado ser√° (n¬∫ de casas da base) x (expoente). Ex: (0,2)¬≥ -> Fazemos 2¬≥=8. A base 0,2 tem 1 casa decimal. O resultado ter√° 1 x 3 = 3 casas. Resposta: <span class="highlight">0,008</span>.</li>
                             </ul>
                             <h3 class="sub-topic-title">Propriedades da Potencia√ß√£o</h3>
                             <ul>
                                 <li><strong>Produto de mesma base (a·µê ‚ãÖ a‚Åø = a·µê‚Å∫‚Åø):</strong> Conserva a base e soma os expoentes. Ex: 2¬≥ ‚ãÖ 2¬≤ = 2‚Åµ = 32.</li>
                                 <li><strong>Divis√£o de mesma base (a·µê / a‚Åø = a·µê‚Åª‚Åø):</strong> Conserva a base e subtrai os expoentes. Ex: 5‚Å∑ / 5¬≥ = 5‚Å¥ = 625.</li>
                                 <li><strong>Pot√™ncia de pot√™ncia ((a·µê)‚Åø = a·µê‚ãÖ‚Åø):</strong> Conserva a base e multiplica os expoentes. Ex: (3¬≤)‚Å¥ = 3‚Å∏.</li>
                             </ul>
                             <h3 class="sub-topic-title">Raiz Quadrada (‚àö)</h3>
                             <p>A raiz quadrada √© a opera√ß√£o inversa da potencia√ß√£o ao quadrado. Calcular ‚àöx √© encontrar um n√∫mero que, multiplicado por si mesmo, resulta em x.</p>
                             <ul>
                                 <li><strong>N√∫mero Natural:</strong> ‚àö49 = 7, pois 7 x 7 = 49. ‚àö121 = 11, pois 11 x 11 = 121.</li>
                                 <li><strong>Fra√ß√£o:</strong> Extrai-se a raiz do numerador e do denominador. Ex: ‚àö(9/25) = ‚àö9 / ‚àö25 = <span class="highlight">3/5</span>.</li>
                                 <li><strong>N√∫mero Decimal:</strong> O melhor m√©todo √© transformar em fra√ß√£o e depois calcular a raiz.
                                    <ul style="padding-left: 1rem; list-style-type: circle;">
                                        <li><strong>Exemplo 1:</strong> ‚àö0,64 = ‚àö(64/100) = ‚àö64 / ‚àö100 = 8/10 = <span class="highlight">0,8</span>.</li>
                                        <li><strong>Exemplo 2:</strong> ‚àö1,21 = ‚àö(121/100) = ‚àö121 / ‚àö100 = 11/10 = <span class="highlight">1,1</span>.</li>
                                        <li><strong>Exemplo 3:</strong> ‚àö0,09 = ‚àö(9/100) = ‚àö9 / ‚àö100 = 3/10 = <span class="highlight">0,3</span>.</li>
                                    </ul>
                                 </li>
                             </ul>
                        </div>

                        <div class="topic-section">
                            <h2 class="topic-title">Circunfer√™ncia</h2>
                            <p>√â uma linha curva fechada onde todos os pontos est√£o √† mesma dist√¢ncia de um ponto central.</p>
                            <ul>
                                <li><strong>Raio (r):</strong> A dist√¢ncia do centro a qualquer ponto da circunfer√™ncia.</li>
                                <li><strong>Di√¢metro (d):</strong> O maior segmento de reta que une dois pontos da circunfer√™ncia, passando pelo centro. <span class="highlight">d = 2r</span>.</li>
                                <li><strong>Corda:</strong> Qualquer segmento de reta que une dois pontos da circunfer√™ncia. O di√¢metro √© a maior corda poss√≠vel.</li>
                                <li><strong>Valor de Pi (œÄ):</strong> √â uma constante matem√°tica que representa a raz√£o entre o comprimento de uma circunfer√™ncia e seu di√¢metro. Seu valor aproximado √© <span class="highlight">3,14</span>.</li>
                             </ul>
                             <h3 class="sub-topic-title">F√≥rmuras Essenciais</h3>
                            <p><strong>Per√≠metro (Comprimento):</strong> √â o contorno da circunfer√™ncia.</p>
                             <p class="formula">C = 2 ‚ãÖ œÄ ‚ãÖ r</p>
                            <p><strong>√Årea:</strong> √â a medida da superf√≠cie do c√≠rculo.</p>
                             <p class="formula">A = œÄ ‚ãÖ r¬≤</p>
                        </div>
                        
                        <div class="topic-section">
                            <h2 class="topic-title">Tri√¢ngulos e Quadril√°teros</h2>
                             <h3 class="sub-topic-title">Tri√¢ngulo: Condi√ß√£o de Exist√™ncia</h3>
                             <p>Para formar um tri√¢ngulo, a medida de <span class="highlight">qualquer lado deve ser sempre menor que a soma das medidas dos outros dois lados</span>. <br><strong>Exemplo:</strong> √â poss√≠vel formar um tri√¢ngulo com lados 5, 7 e 10? Sim, pois 5+7 > 10, 5+10 > 7 e 7+10 > 5. E com 4, 5 e 10? N√£o, pois 4+5 (que √© 9) n√£o √© maior que 10.</p>
                             
                             <h3 class="sub-topic-title">Soma dos √Çngulos Internos</h3>
                             <ul>
                                <li><strong>Tri√¢ngulos:</strong> A soma dos tr√™s √¢ngulos internos de QUALQUER tri√¢ngulo √© sempre <span class="highlight">180¬∞</span>.</li>
                                 <li><strong>Quadril√°teros:</strong> A soma dos quatro √¢ngulos internos de QUALQUER quadril√°tero convexo (quadrado, ret√¢ngulo, losango, trap√©zio...) √© sempre <span class="highlight">360¬∞</span>.</li>
                             </ul>
                        </div>

                    </div>
                </section>

                <section id="practice-section" class="hidden">
                     <div class="mb-4 flex justify-end">
                        <button id="order-toggle-btn" class="btn-ghost text-xs">Ordem Crescente</button>
                    </div>
                    <div id="question-buttons" class="mb-4"></div>
                    <div id="quiz-container">
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const root = document.documentElement;
        const themeToggle = document.getElementById('theme-toggle');
        const btnLearn = document.getElementById('btn-learn');
        const btnPractice = document.getElementById('btn-practice');
        const learnSection = document.getElementById('learn-section');
        const practiceSection = document.getElementById('practice-section');
        const questionButtons = document.getElementById('question-buttons');
        const quizContainer = document.getElementById('quiz-container');
        const orderToggleBtn = document.getElementById('order-toggle-btn');

        if(!btnLearn || !btnPractice || !learnSection || !practiceSection || !questionButtons || !quizContainer || !orderToggleBtn){
            console.error('Elementos DOM n√£o encontrados.');
            return;
        }

        (function(){
            const t = localStorage.getItem('cmf-math-7ano-theme') || 'dark';
            if(t === 'light') root.classList.add('theme-light');
            themeToggle.addEventListener('click', () => {
                root.classList.toggle('theme-light');
                localStorage.setItem('cmf-math-7ano-theme', root.classList.contains('theme-light') ? 'light' : 'dark');
            });
        })();
        
        const quizData = [
            { topic: 'N√∫meros Decimais', difficulty: 'F√°cil', q: '1) Qual o resultado de 3,5 x 0,2?', options: ['7,0', '0,7', '0,07', '70'], answer: '0,7', explanation: 'Primeiro, 35 * 2 = 70. Como 3,5 tem uma casa decimal e 0,2 tem uma, o resultado ter√° duas casas decimais: 0,70 ou 0,7.'},
            { topic: 'N√∫meros Decimais', difficulty: 'M√©dio', q: '2) Calcule 4,8 √∑ 0,12.', options: ['4', '0,4', '40', '400'], answer: '40', explanation: 'Igualamos as casas decimais: 4,80 √∑ 0,12. Removemos as v√≠rgulas: 480 √∑ 12 = 40.'},
            { topic: 'Potencia√ß√£o e Raiz Quadrada', difficulty: 'F√°cil', q: '3) Qual o valor de (1/4)¬≤?', options: ['1/8', '2/8', '1/16', '2/16'], answer: '1/16', explanation: 'Elevamos o numerador e o denominador ao expoente: 1¬≤ = 1 e 4¬≤ = 16.'},
            { topic: 'Potencia√ß√£o e Raiz Quadrada', difficulty: 'M√©dio', q: '4) O resultado de (0,5)¬≥ √©:', options: ['1,5', '0,15', '0,125', '1,25'], answer: '0,125', explanation: '5¬≥ = 125. Como 0,5 tem uma casa decimal, o resultado ter√° 1*3=3 casas: 0,125.'},
            { topic: 'Propriedades da Potencia√ß√£o', difficulty: 'M√©dio', q: '5) Simplificando a express√£o 7‚Åµ ‚ãÖ 7¬≥, obtemos:', options: ['7‚Å∏', '7¬π‚Åµ', '49‚Å∏', '14‚Å∏'], answer: '7‚Å∏', explanation: 'Na multiplica√ß√£o de pot√™ncias de mesma base, conservamos a base e somamos os expoentes (5 + 3 = 8).'},
            { topic: 'Propriedades da Potencia√ß√£o', difficulty: 'M√©dio', q: '6) A express√£o (10‚Å¥)¬≥ √© igual a:', options: ['10‚Å∑', '10¬π', '10¬π¬≤', '30‚Å¥'], answer: '10¬π¬≤', explanation: 'Em uma pot√™ncia de pot√™ncia, conservamos a base e multiplicamos os expoentes (4 * 3 = 12).'},
            { topic: 'Potencia√ß√£o e Raiz Quadrada', difficulty: 'M√©dio', q: '7) Qual o valor de ‚àö(49/100)?', options: ['7/100', '4/10', '7/10', '4/9'], answer: '7/10', explanation: 'Extra√≠mos a raiz do numerador (‚àö49 = 7) e do denominador (‚àö100 = 10).'},
            { topic: 'Potencia√ß√£o e Raiz Quadrada', difficulty: 'M√©dio', q: '8) Qual o valor de ‚àö1,44?', options: ['1,2', '0,12', '12', '0,012'], answer: '1,2', explanation: 'Transforme em fra√ß√£o: ‚àö1,44 = ‚àö(144/100) = ‚àö144 / ‚àö100 = 12/10 = 1,2.'},
            { topic: 'Circunfer√™ncia - Elementos', difficulty: 'F√°cil', q: '9) Como √© chamado o segmento de reta que une o centro a qualquer ponto da circunfer√™ncia?', options: ['Corda', 'Di√¢metro', 'Raio', 'Arco'], answer: 'Raio', explanation: 'Essa √© a defini√ß√£o de raio, a medida fundamental da circunfer√™ncia.'},
            { topic: 'Circunfer√™ncia - Elementos', difficulty: 'F√°cil', q: '10) A maior corda de uma circunfer√™ncia √© o:', options: ['Raio', 'Di√¢metro', 'Arco', 'Setor'], answer: 'Di√¢metro', explanation: 'O di√¢metro passa pelo centro e equivale a duas vezes o raio.'},
            { topic: 'Circunfer√™ncia - Per√≠metro', difficulty: 'M√©dio', q: '11) Qual o comprimento de uma circunfer√™ncia de raio 5 cm? (Use œÄ = 3,14)', options: ['15,7 cm', '31,4 cm', '78,5 cm', '10 cm'], answer: '31,4 cm', explanation: 'C = 2 * œÄ * r = 2 * 3,14 * 5 = 31,4 cm.'},
            { topic: 'Circunfer√™ncia - √Årea', difficulty: 'M√©dio', q: '12) Qual a √°rea de um c√≠rculo com di√¢metro de 20 metros? (Use œÄ = 3,14)', options: ['62,8 m¬≤', '125,6 m¬≤', '314 m¬≤', '1256 m¬≤'], answer: '314 m¬≤', explanation: 'Se o di√¢metro √© 20m, o raio √© 10m. A = œÄ * r¬≤ = 3,14 * 10¬≤ = 314 m¬≤.'},
            { topic: 'Circunfer√™ncia - F√≥rmulas', difficulty: 'F√°cil', q: '13) Qual √© a f√≥rmula para calcular a √°rea de um c√≠rculo?', options: ['A = 2œÄr', 'A = œÄd', 'A = œÄr¬≤', 'A = œÄ¬≤r'], answer: 'A = œÄr¬≤', explanation: 'A √°rea do c√≠rculo √© calculada por Pi multiplicado pelo raio ao quadrado.'},
            { topic: 'Circunfer√™ncia - F√≥rmulas', difficulty: 'F√°cil', q: '14) Qual √© a f√≥rmula para calcular o per√≠metro (comprimento) de uma circunfer√™ncia?', options: ['C = œÄr¬≤', 'C = 2œÄr', 'C = œÄd¬≤', 'C = œÄr'], answer: 'C = 2œÄr', explanation: 'O comprimento √© duas vezes o Pi vezes o raio, ou Pi vezes o di√¢metro.'},
            { topic: 'Tri√¢ngulos - Exist√™ncia', difficulty: 'M√©dio', q: '15) Com quais medidas √© POSS√çVEL formar um tri√¢ngulo?', options: ['2 cm, 3 cm, 6 cm', '1 cm, 2 cm, 3 cm', '5 cm, 8 cm, 12 cm', '4 cm, 5 cm, 10 cm'], answer: '5 cm, 8 cm, 12 cm', explanation: '√â a √∫nica op√ß√£o onde a soma dos dois menores lados (5+8=13) √© maior que o terceiro lado (12).'},
            { topic: 'Tri√¢ngulos - Exist√™ncia', difficulty: 'M√©dio', q: '16) Dois lados de um tri√¢ngulo medem 6 cm e 10 cm. O terceiro lado N√ÉO pode medir:', options: ['5 cm', '8 cm', '15 cm', '16 cm'], answer: '16 cm', explanation: 'Pela condi√ß√£o de exist√™ncia, o terceiro lado deve ser menor que a soma dos outros dois (6+10=16). Ele n√£o pode ser igual a 16.'},
            { topic: 'Tri√¢ngulos - √Çngulos', difficulty: 'F√°cil', q: '17) Qual √© a soma dos √¢ngulos internos de qualquer tri√¢ngulo?', options: ['90¬∞', '180¬∞', '270¬∞', '360¬∞'], answer: '180¬∞', explanation: 'Essa √© uma propriedade fundamental de todos os tri√¢ngulos.'},
            { topic: 'Tri√¢ngulos - √Çngulos', difficulty: 'F√°cil', q: '18) Se dois √¢ngulos de um tri√¢ngulo medem 50¬∞ e 70¬∞, qual a medida do terceiro √¢ngulo?', options: ['50¬∞', '60¬∞', '70¬∞', '80¬∞'], answer: '60¬∞', explanation: 'A soma deve ser 180¬∞. 180 - (50 + 70) = 180 - 120 = 60¬∞.'},
            { topic: 'Tri√¢ngulos - √Çngulos', difficulty: 'M√©dio', q: '19) Em um tri√¢ngulo ret√¢ngulo is√≥sceles, quais s√£o as medidas dos seus tr√™s √¢ngulos?', options: ['90¬∞, 45¬∞, 45¬∞', '90¬∞, 30¬∞, 60¬∞', '60¬∞, 60¬∞, 60¬∞', '100¬∞, 40¬∞, 40¬∞'], answer: '90¬∞, 45¬∞, 45¬∞', explanation: 'Um √¢ngulo √© 90¬∞ (ret√¢ngulo). Os outros dois s√£o iguais (is√≥sceles), e sua soma deve ser 90¬∞. Logo, 45¬∞ para cada um.'},
            { topic: 'Quadril√°teros - √Çngulos', difficulty: 'F√°cil', q: '20) Qual √© a soma dos √¢ngulos internos de qualquer quadril√°tero convexo?', options: ['90¬∞', '180¬∞', '270¬∞', '360¬∞'], answer: '360¬∞', explanation: 'Essa √© a propriedade fundamental de todos os quadril√°teros convexos.'},
            { topic: 'Quadril√°teros - √Çngulos', difficulty: 'F√°cil', q: '21) Os √¢ngulos de um ret√¢ngulo medem:', options: ['Todos 60¬∞', 'Dois de 60¬∞ e dois de 120¬∞', 'Todos 90¬∞', 'Depende do tamanho'], answer: 'Todos 90¬∞', explanation: 'A defini√ß√£o de um ret√¢ngulo √© ser um quadril√°tero com quatro √¢ngulos retos (90¬∞).'},
            { topic: 'Quadril√°teros - √Çngulos', difficulty: 'M√©dio', q: '22) Tr√™s √¢ngulos de um quadril√°tero medem 70¬∞, 100¬∞ e 110¬∞. Qual a medida do quarto √¢ngulo?', options: ['60¬∞', '70¬∞', '80¬∞', '90¬∞'], answer: '80¬∞', explanation: 'A soma deve ser 360¬∞. 360 - (70 + 100 + 110) = 360 - 280 = 80¬∞.'},
            { topic: 'Quadril√°teros - √Çngulos', difficulty: 'M√©dio', q: '23) Em um losango, os √¢ngulos opostos s√£o sempre:', options: ['Complementares', 'Suplementares', 'Diferentes', 'Iguais'], answer: 'Iguais', explanation: 'Uma das propriedades do losango √© ter √¢ngulos opostos com a mesma medida.'},
            { topic: 'Quadril√°teros - √Çngulos', difficulty: 'Dif√≠cil', q: '24) Em um trap√©zio is√≥sceles, um dos √¢ngulos da base maior mede 75¬∞. Qual a medida de um dos √¢ngulos da base menor?', options: ['75¬∞', '90¬∞', '105¬∞', '115¬∞'], answer: '105¬∞', explanation: 'Em um trap√©zio, os √¢ngulos adjacentes a um lado n√£o paralelo s√£o suplementares (somam 180¬∞). 180 - 75 = 105¬∞.'},
            { topic: 'Revis√£o Geral', difficulty: 'Dif√≠cil', q: '25) Qual o resultado da express√£o (1/2)¬≤ + ‚àö0,25?', options: ['0,50', '0,75', '1,00', '1,25'], answer: '0,75', explanation: '(1/2)¬≤ = 1/4 = 0,25. ‚àö0,25 = 0,5. A soma √© 0,25 + 0,5 = 0,75.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '26) Se o di√¢metro de um pneu √© 60 cm, qual a dist√¢ncia aproximada que ele percorre em uma volta completa? (Use œÄ = 3,1)', options: ['186 cm', '93 cm', '372 cm', '60 cm'], answer: '186 cm', explanation: 'A dist√¢ncia de uma volta √© o comprimento. C = d * œÄ = 60 * 3,1 = 186 cm.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '27) Qual o valor da express√£o (5¬≤)¬≥ / 5‚Å¥?', options: ['5', '25', '125', '1'], answer: '25', explanation: '(5¬≤)¬≥ = 5‚Å∂. Ent√£o, 5‚Å∂ / 5‚Å¥ = 5‚Å∂‚Åª‚Å¥ = 5¬≤ = 25.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '28) Um terreno retangular tem 15m de largura e 300m¬≤ de √°rea. Qual o seu comprimento?', options: ['10m', '15m', '20m', '25m'], answer: '20m', explanation: '√Årea = Comprimento * Largura => 300 = C * 15 => C = 300 / 15 = 20m.'},
            { topic: 'Revis√£o Geral', difficulty: 'F√°cil', q: '29) Um √¢ngulo de 45¬∞ √© classificado como:', options: ['Agudo', 'Reto', 'Obtuso', 'Raso'], answer: 'Agudo', explanation: '√Çngulos agudos s√£o aqueles menores que 90¬∞.'},
            { topic: 'Revis√£o Geral', difficulty: 'M√©dio', q: '30) Qual dos seguintes trios de √¢ngulos pode formar um tri√¢ngulo?', options: ['60¬∞, 60¬∞, 70¬∞', '90¬∞, 90¬∞, 10¬∞', '40¬∞, 50¬∞, 90¬∞', '80¬∞, 80¬∞, 30¬∞'], answer: '40¬∞, 50¬∞, 90¬∞', explanation: '√â o √∫nico trio cuja soma dos √¢ngulos √© exatamente 180¬∞.'}
        ];

        let questionOrder = quizData.map((_,i)=>i);
        let currentIndex = 0;
        let questionStatus = Array(quizData.length).fill(null);
        let quizStarted = false;
        let isRandomOrder = false; 

        // DOM Elements for the quiz
        const questionInfoContainer = document.createElement('div');
        questionInfoContainer.className = 'question-tags';
        const questionTopic = document.createElement('span');
        questionTopic.className='topic-badge';
        const questionDifficulty = document.createElement('span');
        const questionText = document.createElement('p');
        questionText.className='text-xl mt-2';
        const optionsContainer = document.createElement('div');
        optionsContainer.className='mt-4 grid gap-3';
        const feedbackContainer = document.createElement('div');
        const nextBtn = document.createElement('button');
        nextBtn.className='btn-primary mt-4 hidden';
        nextBtn.textContent='Pr√≥xima';
        const redoBtn = document.createElement('button');
        redoBtn.className='btn-ghost mt-4 ml-3 hidden';
        redoBtn.textContent='Refazer';

        quizContainer.appendChild(questionInfoContainer);
        quizContainer.appendChild(questionText);
        quizContainer.appendChild(optionsContainer);
        quizContainer.appendChild(feedbackContainer);
        quizContainer.appendChild(nextBtn);
        quizContainer.appendChild(redoBtn);
        
        orderToggleBtn.addEventListener('click', () => {
            isRandomOrder = !isRandomOrder; 
            orderToggleBtn.textContent = isRandomOrder ? 'Ordem Aleat√≥ria' : 'Ordem Crescente';
            startQuiz();
        });

        function switchView(view){
            if(view==='learn'){
                practiceSection.classList.add('hidden');
                learnSection.classList.remove('hidden');
                btnLearn.classList.replace('btn-ghost', 'btn-primary');
                btnPractice.classList.replace('btn-primary', 'btn-ghost');
            } else {
                learnSection.classList.add('hidden');
                practiceSection.classList.remove('hidden');
                btnPractice.classList.replace('btn-ghost', 'btn-primary');
                btnLearn.classList.replace('btn-primary', 'btn-ghost');
                if (!quizStarted) {
                    startQuiz();
                    quizStarted = true;
                }
            }
        }

        btnLearn.addEventListener('click', () => switchView('learn'));
        btnPractice.addEventListener('click', () => switchView('practice'));

        function renderQuestionButtons(){
            questionButtons.innerHTML='';
            quizData.forEach((_,originalIndex)=>{
                const b = document.createElement('button');
                b.textContent = (originalIndex + 1);
                b.setAttribute('data-original-index', String(originalIndex));
                b.title = `Ir para a quest√£o ${originalIndex+1}`;
                b.onclick = ()=>{
                    const pos = questionOrder.indexOf(originalIndex);
                    if(pos >= 0){ currentIndex = pos; showQuestion(); }
                };
                if(questionStatus[originalIndex]==='correct') b.classList.add('correct-status');
                if(questionStatus[originalIndex]==='wrong') b.classList.add('wrong-status');
                
                if (quizStarted && currentIndex < quizData.length) {
                    const currentQuestionOriginalIndex = questionOrder[currentIndex];
                    if(originalIndex === currentQuestionOriginalIndex) {
                        b.classList.add('current-question');
                    }
                }
                
                questionButtons.appendChild(b);
            });
        }
        
        function startQuiz(){
            if (isRandomOrder) {
                shuffleArray(questionOrder);
            } else {
                questionOrder = quizData.map((_, i) => i);
            }
            currentIndex = 0;
            questionStatus.fill(null);
            showQuestion();
        }

        function showQuestion(){
            const finalResultsDiv = document.getElementById('final-results');
            if (finalResultsDiv) finalResultsDiv.remove();
            quizContainer.style.display = 'block';

            if (currentIndex >= quizData.length) {
                showFinalResults();
                return;
            }
        
            const qIdx = questionOrder[currentIndex];
            const qObj = quizData[qIdx];
            
            questionInfoContainer.classList.remove('hidden');
            questionTopic.textContent = qObj.topic;
            questionDifficulty.textContent = qObj.difficulty;
            questionDifficulty.className = `difficulty-badge difficulty-${qObj.difficulty.toLowerCase()}`;
            
            // Limpa e adiciona as tags de t√≥pico e dificuldade
            questionInfoContainer.innerHTML = '';
            questionInfoContainer.appendChild(questionTopic);
            questionInfoContainer.appendChild(questionDifficulty);
            
            questionText.innerHTML = `${qIdx + 1}) ${qObj.q.replace(/^[\s\d\)\(\.\:\-‚Äì‚Äî_]+/,'').trim()}`;
            
            optionsContainer.innerHTML='';
            feedbackContainer.innerHTML='';
            redoBtn.classList.add('hidden');
            nextBtn.classList.add('hidden'); 
            
            qObj.options.forEach(opt =>{
                const b = document.createElement('button');
                b.className='option-btn'; 
                b.textContent=opt;
                b.onclick = ()=> selectAnswer(b, opt, qObj.answer, qObj.explanation, qIdx);
                optionsContainer.appendChild(b);
            });

            renderQuestionButtons();
        }
        
        function showFinalResults() {
            const correctCount = questionStatus.filter(s => s === 'correct').length;
            const total = quizData.length;
            
            quizContainer.style.display = 'none';

            let finalResultsDiv = document.createElement('div');
            finalResultsDiv.id = 'final-results';
            finalResultsDiv.className = 'text-center';
            practiceSection.appendChild(finalResultsDiv);

            finalResultsDiv.innerHTML = `
                <h2 class="text-2xl font-bold">üéâ Fim do Quiz! üéâ</h2>
                <p class="text-lg mt-4">Voc√™ acertou ${correctCount} de ${total} quest√µes.</p>
                <button id="restart-btn" class="btn-primary mt-6">Recome√ßar Quiz</button>
            `;
            
            document.getElementById('restart-btn').onclick = () => {
                quizStarted = false;
                startQuiz(); 
                quizStarted = true;
            };
        }

        function selectAnswer(btn,opt,correct,explanation,qIdx){
            Array.from(optionsContainer.children).forEach(b=> {
                b.disabled=true;
                if(b.textContent === correct) {
                    b.classList.add('correct');
                }
            });
            nextBtn.classList.remove('hidden');

            if(opt===correct){
                btn.classList.add('celebrate');
                createConfetti();
                questionStatus[qIdx]='correct';
                feedbackContainer.className='feedback-correct mt-4';
                feedbackContainer.textContent = 'Correto! ' + (explanation || '');
            } else {
                btn.classList.add('wrong');
                questionStatus[qIdx]='wrong';
                feedbackContainer.className='feedback-wrong mt-4';
                feedbackContainer.innerHTML = `<strong>Errado.</strong> ${explanation || ''}`;
                redoBtn.classList.remove('hidden');
            }
            renderQuestionButtons();
        }

        nextBtn.addEventListener('click', ()=>{
            if(currentIndex < questionOrder.length-1){ 
                currentIndex++; 
                showQuestion(); 
            } else { 
                currentIndex++;
                showFinalResults();
            }
        });

        redoBtn.addEventListener('click', ()=>{
            const currentQuestionIndex = questionOrder[currentIndex];
            questionStatus[currentQuestionIndex] = null;
            showQuestion();
        });

        function shuffleArray(a){
            for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; }
        }

        function createConfetti(){
            const colors = ['#f59e0b','#ef4444','#10b981','#3b82f6','#8b5cf6'];
            for(let i=0;i<12;i++){
                const el = document.createElement('div');
                el.className='confetti';
                el.style.left = (30 + Math.random()*40) + '%';
                el.style.top = (10 + Math.random()*10) + 'vh';
                el.style.color = colors[Math.floor(Math.random()*colors.length)];
                el.textContent = 'üéâ';
                el.style.transform = `rotate(${Math.random()*360}deg)`;
                el.style.animation = `confetti-fall ${1.2 + Math.random()*1}s linear forwards`;
                document.body.appendChild(el);
                setTimeout(()=> el.remove(), 2200);
            }
        }
        
        switchView('learn');
    });
    </script>
</body>
</html>